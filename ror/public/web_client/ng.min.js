"use strict";function AppCtrl(e,t,r,n,s,a,i,o){e=angular.extend(e,{title:"Cizo",hostName:"https://staging.cizo.com",sharingPath:"https://staging.cizo.com/app",facebookAppIdStage:"459923084193687",facebookAppIdProd:"459778204208175",videosList:[],categoriesList:[],featuredList:[],userAuthorized:!1,storage:{storageSeenKey:"seen",storageFavoritesKey:"favorites",storageUserToken:"token",seenItems:[],favoritesItems:[],token:void 0}}),t.configureStates(r),e.storage.token=s.getItem(e.storage.storageUserToken),e.storage.token&&a.isUnexpiredToken(e.storage.token)&&o(function(){a.updateToken(e.hostName,e.storage.token).then(function(t){s.setItem(e.storage.storageUserToken,t.data),e.storage.token=t.data})},3e4),a.isUnexpiredToken(e.storage.token)?e.userAuthorized=!0:(s.deleteItem(e.storage.storageUserToken),e.userAuthorized=!1),e.storage.seenItems=s.getItem(e.storage.storageSeenKey),null==e.storage.seenItems&&(e.storage.seenItems=[]),e.storage.favoritesItems=s.getItem(e.storage.storageFavoritesKey),null==e.storage.favoritesItems&&(e.storage.favoritesItems=[])}function categoriesServ(e,t,r){function n(n){return t(function(t,s){function a(e){r.info("categories list obtained"),t(e)}function i(e){r.info("categories list obtaining error with status "+e.status),s(e)}e({method:"GET",url:n.hostName+"/categories"}).then(a,i)})}function s(n,s){return t(function(t,a){function i(e){r.info("category data created"),t(e)}function o(e){r.info("category data creation error with status "+e.status),a(e)}e({method:"POST",url:n.hostName+"/categories",data:s}).then(i,o)})}function a(n,s){return t(function(t,a){function i(e){r.info("category data delivered"),t(e)}function o(e){r.info("category data getting error with status "+e.status),a(e)}e({method:"GET",url:n.hostName+"/categories/"+s}).then(i,o)})}function i(n,s,a){return t(function(t,i){function o(e){r.info("category data updated"),t(e)}function l(e){r.info("category data updating error with status "+e.status),i(e)}e({method:"PUT",url:n.hostName+"/categories/"+s,data:a}).then(o,l)})}function o(n,s){return t(function(t,a){function i(e){r.info("category data deleted"),t(e)}function o(e){r.info("category data deleting error with status "+e.status),a(e)}e({method:"DELETE",url:n.hostName+"/categories/"+s}).then(i,o)})}return{getCategoriesList:n,makeCategory:s,getCategory:a,setCategory:i,deleteCategory:o}}function playerServ(e,t,r,n,s,a,i,o){function l(){return!document.fullscreenElement&&!document.mozFullScreenElement&&null!==document.webkitFullscreenElement&&!document.msFullscreenElement}function c(t){return e(function(e){var r=l();r?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():$document.msExitFullscreen&&document.msExitFullscreen(),e()):(t.screen.requestFullscreen?t.screen.requestFullscreen():t.screen.mozRequestFullScreen?t.screen.mozRequestFullScreen():t.screen.webkitRequestFullScreen?t.screen.webkitRequestFullScreen():t.screen.msRequestFullscreen&&t.screen.msRequestFullscreen(),e())})}function d(e,t){if(e&&e.id){var r=e.id,n=void 0,s=o.findIndex(t,function(e){return e.id===r});return s>0&&(n=t[s-1]),n}}function u(e,t){if(e){var r=e.id,n=void 0,s=o.findIndex(t,function(e){return e.id===r});return s+1<t.length&&(n=t[s+1]),n}}function m(e){t.go("share",{videoId:e})}function p(t){return e(function(e){s.getFeaturedList(t).then(function(n){r.featuredList=t.featuredList,t.featuredList=n.data.data,e(t)})})}function y(t){return e(function(e){n.getCategoriesList(t).then(function(n){t.categoriesList=n.data.data,r.categoriesList=n.data.data,e(t)})})}function g(t){return e(function(e){s.getVideosList(t).then(function(r){t.videosList=o.filter(r.data.data,function(e){return e.hero_images&&e.hero_images.hero_image_link&&e.streams&&e.streams.length}),e(t)})})}function v(e){var t=moment(e),r=moment();return r.to(t)}function _(t){return e(function(e){var r=o.map(t.videosList,function(e){var r=o.find(t.categoriesList,function(t){return t.id===e.category_id});return r&&(e.categoryName=r.title,e.categoryId=r.category_id,e.humanizedDate=e&&e.created_at?v(e.created_at):void 0,e.instantPlay=!1),t.userAuthorized&&(t.storage.seenItems&&t.storage.seenItems.length&&(e.isWatched=o.some(t.storage.seenItems,e.id)),t.storage.favoritesItems&&t.storage.favoritesItems.length?e.favorites=o.some(t.storage.favoritesItems,e.id):e.favorites=!1),e});t.videosList=r,e(t.videosList)})}function f(e,t,r){e.seenItems.push(r),e.seenItems=o.uniq(e.seenItems),a.setItem(e.storageSeenKey,e.seenItems),i.setVideoSeen(t,e.token.access_token,r)}function h(e){var t={0:"all",11:"movie",12:"tv",13:"games",14:"lifestyle"};return t[Number(e)]}return{toggleFullScreen:c,getElementFullscreenState:l,getPreviousVideo:d,getNextVideo:u,shareVideo:m,getFeaturedList:p,getCategories:y,getVideos:g,updateVideos:_,getIconName:h,setVideoWatched:f}}function userServ(e,t,r,n){function s(n,s){return t(function(t,a){function i(e){r.info("user registered"),t(e)}function o(e){r.info("user register obtaining error with status "+e.status),a(e)}e({method:"POST",url:n+"/users",data:{user:s}}).then(i,o)})}function a(n,s){return t(function(t,a){function i(e){r.info("user logged in"),t(e)}function o(e){r.info("user login obtaining error with status "+e.status),a(e)}e({method:"POST",url:n+("/oauth/token?grant_type=password&username="+s.login+"&password="+s.password)}).then(i,o)})}function i(t){function n(e){r.info("user logged in"),resolve(e)}function s(e){r.info("user login obtaining error with status "+e.status),reject(e)}e({method:"GET",url:t+"/users/auth/facebook"}).then(n,s)}function o(n,s){return t(function(t,a){function i(e){r.info("user logged in"),t(e)}function o(e){r.info("user login obtaining error with status "+e.status),a(e)}e({method:"POST",url:n+("/oauth/token?grant_type=refresh_token&refresh_token="+s.refresh_token)}).then(i,o)})}function l(e){if(!e||null===e)return!1;var t=n(e.created_at),r=n(),s=t.add(e.expires_in);return r.diff(s)>0}function c(n,s,a){return t(function(t,i){function o(e){r.info("unseen videos obtained"),t(e.data.data)}function l(e){r.info("unseen videos obtaining error with status "+e.status),i(e)}s||i(),e({method:"GET",url:n+"/users/me/videos/unseen",params:a,headers:{Authorization:"Bearer "+s}}).then(o,l)})}function d(n,s,a){return t(function(t,i){function o(e){r.info("seen videos obtained"),t(e.data.data)}function l(e){r.info("seen videos obtaining error with status "+e.status),i(e)}s||i(),e({method:"GET",url:n+"/users/me/videos/seen",params:a,headers:{Authorization:"Bearer "+s}}).then(o,l)})}function u(n,s,a){return t(function(t,i){function o(e){r.info("seen videos set"),t(e.data.data)}function l(e){r.info("seen videos set error with status "+e.status),i(e)}s||i(),e({method:"PUT",url:n+("/users/me/videos/seen/"+a),headers:{Authorization:"Bearer "+s}}).then(o,l)})}function m(n,s,a){return t(function(t,i){function o(e){r.info("skipped videos obtained"),t(e.data.data)}function l(e){r.info("skipped videos obtaining error with status "+e.status),i(e)}s||i(),e({method:"GET",url:n+"/users/me/videos/skipped",params:a,headers:{Authorization:"Bearer "+s}}).then(o,l)})}function p(n,s,a){return t(function(t,i){function o(e){r.info("skipped videos set"),t(e.data.data)}function l(e){r.info("skipped videos set error with status "+e.status),i(e)}s||i(),e({method:"PUT",url:n+("/users/me/videos/skipped/"+a),headers:{Authorization:"Bearer "+s}}).then(o,l)})}function y(n,s,a){return t(function(t,i){function o(e){r.info("liked videos obtained"),t(e.data.data)}function l(e){r.info("liked videos obtaining error with status "+e.status),i(e)}s||i(),e({method:"GET",url:n+"/users/me/videos/liked",params:a,headers:{Authorization:"Bearer "+s}}).then(o,l)})}function g(n,s,a){return t(function(t,i){function o(e){r.info("liked videos set"),t(e.data.data)}function l(e){r.info("liked videos set error with status "+e.status),i(e)}s||i(),e({method:"PUT",url:n+("/users/me/videos/liked/"+a),headers:{Authorization:"Bearer "+s}}).then(o,l)})}function v(n,s,a){return t(function(t,i){function o(e){r.info("liked videos deleted"),t(e.data.data)}function l(e){r.info("liked videos delete error with status "+e.status),i(e)}s||i(),e({method:"DELETE",url:n+("/users/me/videos/liked/"+a),headers:{Authorization:"Bearer "+s}}).then(o,l)})}return{registerUser:s,login:a,facebookAuth:i,updateToken:o,isUnexpiredToken:l,getUnseenList:c,setVideoSeen:u,getVideoSeen:d,getSkipped:m,setSkipped:p,getLiked:y,setLiked:g,deleteLiked:v}}function videoServ(e,t,r){function n(n){return t(function(t,s){function a(e){r.info("video list obtained"),t(e)}function i(e){r.info("video list obtaining error with status "+e.status),s(e)}e({method:"GET",url:n.hostName+"/videos"}).then(a,i)})}function s(n,s){return t(function(t,a){function i(e){r.info("video data created"),t(e)}function o(e){r.info("video data creation error with status "+e.status),a(e)}e({method:"POST",url:n.hostName+"/videos",data:s}).then(i,o)})}function a(n,s){return t(function(t,a){function i(e){r.info("video data delivered"),t(e)}function o(e){r.info("video data getting error with status "+e.status),a(e)}e({method:"GET",url:n.hostName+"/videos/"+s}).then(i,o)})}function i(n,s,a){return t(function(t,i){function o(e){r.info("video data updated"),t(e)}function l(e){r.info("video data updating error with status "+e.status),i(e)}e({method:"PUT",url:n.hostName+"/videos/"+s,data:a}).then(o,l)})}function o(n,s){return t(function(t,a){function i(e){r.info("video data deleted"),t(e)}function o(e){r.info("video data deleting error with status "+e.status),a(e)}e({method:"DELETE",url:n.hostName+"/videos/"+s}).then(i,o)})}function l(n){return t(function(t,s){function a(e){r.info("video list obtained"),t(e)}function i(e){r.info("video list obtaining error with status "+e.status),s(e)}e({method:"GET",url:n.hostName+"/featured"}).then(a,i)})}function c(n,s,a){var i=new FormData,o=i.append("heroImage",a);return t(function(t,a){function i(e){r.info("hero image uploaded"),t(e)}function l(e){r.info("hero image uploading error with status "+e.status),a(e)}e({method:"POST",url:n.hostName+"/videos/"+s+"/heroimage",data:o}).then(i,l)})}function d(n,s){return t(function(t,a){function i(e){r.info("streams called"),r.info(JSON.stringify(e)),t(e)}function o(e){r.info("streams call receiving error with status "+e.status),a(e)}e({method:"POST",url:n.hostName+"/videos/"+s+"/streams"}).then(i,o)})}return{getVideosList:n,makeVideo:s,getVideo:a,setVideo:i,deleteVideo:o,getFeaturedList:l,uploadHeroImage:c,sendStreams:d}}function videoSrc(){return{restrict:"A",link:{pre:function(e,t,r){function n(){if(s&&s.length){for(var t=0,r=s.length;r>t;t++)if(a=i[0].canPlayType(s[t].type),"maybe"==a||"probably"==a){i.attr("src",s[t].src),i.attr("type",s[t].type);break}""==a&&e.$emit("onVideoError",{type:"Can't play file"})}}var s,a,i=t;e.$watch(r.videoSrc,function(e,t){s&&e==t||(s=e,n())})}}}}function _lodash(e){return _}function _moment(){return moment}function routerHelperProvider(e,t,r){function n(e){function n(e,n){for(var s=0;s<e.length;s++)t.state(e[s].state,e[s].config);n&&!a&&(a=!0,r.otherwise(n))}function s(){return e.get()}var a=!1;return{configureStates:n,getStates:s}}this.$get=n,n.$inject=["$state"]}function storageServ(e){function t(t){return JSON.parse(e.localStorage.getItem(t))}function r(t,r){e.localStorage.setItem(t,JSON.stringify(r))}function n(t){e.localStorage.removeItem(t)}return{getItem:t,setItem:r,deleteItem:n}}function categoryItems(e,t,r){function n(n){function s(e,r){var s=void 0;if(s=parseInt(r)?t.filter(e,function(e){return e.category_id===parseInt(r)}):e,s.length>7){for(var a=[],i=0;7>i;i++)a.push(s[i]);n.manyItems=!0,s=a}return s}function a(e,r){var n=void 0;if(parseInt(r)){var s=t.find(e,function(e){return e.id===parseInt(r)});s&&s.title&&(n=s.title)}else n="All";return n}function i(t){e.go("play",{videoId:t,categoryId:n.categoryId})}n=angular.extend(n,{videosList:[],title:"",manyItems:!1,moveToPlayPage:i,iconName:r.getIconName(n.categoryId)}),n.$watch("videos",function(e){n.videosList=s(e,n.categoryId)}),n.$watch("categories",function(e){n.title=a(e,n.categoryId)})}return{restrict:"E",templateUrl:"components/category-items/category-items.html",link:n,transclude:!1,scope:{videos:"=",categoryId:"@",categories:"="}}}function featuredCarousel(e){function t(t){function r(r){var n=e.find(t.featuredList,function(e){return e.id===parseInt(r)});n.instantPlay=!0,t.selectedVideo=n}function n(){var e=t.featuredList.length/(t.currentStep*a)>1;e&&(t.currentStep++,t.itemsOffset=-1*i*(t.currentStep-1)+"px")}function s(){t.currentStep>1&&(t.currentStep--,t.itemsOffset=-1*i*(t.currentStep-1)+"px")}var a=4,i=1220;t=angular.extend(t,{itemsOffset:0,currentStep:1,playFeatured:r,moveNext:n,movePrev:s})}return{restrict:"E",templateUrl:"components/featured-carousel/featured-carousel.html",link:t,transclude:!1,scope:{featuredList:"=",selectedVideo:"=",replay:"&onReplay"}}}function featuredPlayer(e,t,r,n,s,a,i,o,l,c,d){function u(c,u,m){function p(){return{start:0,value:0,options:{floor:0,ceil:500,hideLimitLabels:!0,onChange:function(){console.log("change to "+c.sliderModel.value),c.sliderModel.start>0&&(c.sliderModel.value=c.sliderModel.start,c.sliderModel.start=0),c.screen.currentTime=c.sliderModel.value}}}}function y(e,t){e&&e.stopPropagation(),R(t)}function g(){c.isIntermissionState=!0,T(),O(!0),c.intermissionCountdownValue=0,c.isPlaying=!1,c.featuredPlayerInside.classList.remove("featured-player--playing"),c.imageLayer.classList.remove("featured-player_hero-image-layer--playing"),c.bottomElements.classList.add("hidden-layer"),document.querySelector(".home_video-items").classList.remove("home_video-items--playing"),c.intermissionStopTimer=o(function(){c.intermissionCountdownValue++,c.intermissionCountdownValue>c.intermissionCountdownMax&&(o.cancel(c.intermissionStopTimer),c.playNextVideo())},50)}function v(e,t){e&&e.stopPropagation(),t&&(c.isIntermissionPaused=!1,c.intermissionStopTimer&&o.cancel(c.intermissionStopTimer)),c.isIntermissionPaused?(c.intermissionStopTimer=o(function(){c.intermissionCountdownValue++,c.intermissionCountdownValue>c.intermissionCountdownMax&&(o.cancel(c.intermissionStopTimer),c.playNextVideo())},50),c.isIntermissionPaused=!1):(c.intermissionStopTimer&&o.cancel(c.intermissionStopTimer),c.isIntermissionPaused=!0)}function _(){if(c.video){var e=c.video.id,t=void 0,n=r.findIndex(c.featuredList,function(t){return t.id===e});return n+1<c.featuredList.length&&(t=c.featuredList[n+1]),t}}function f(e){e&&e.stopPropagation(),c.isPlaying=!0,c.featuredPlayerInside.classList.add("featured-player--playing"),c.imageLayer.classList.add("featured-player_hero-image-layer--playing"),c.bottomElements.classList.remove("hidden-layer"),document.querySelector(".home_video-items").classList.add("home_video-items--playing"),v(void 0,!0);var t=_();t&&t.featured?(c.screen.pause(),c.video=t,c.isIntermissionState=!1,O(!1),s(function(){c.screen.play()},500)):c.screen.pause()}function h(e){e&&e.stopPropagation(),c.isPlaying=!0,c.featuredPlayerInside.classList.add("featured-player--playing"),c.imageLayer.classList.add("featured-player_hero-image-layer--playing"),c.bottomElements.classList.remove("hidden-layer"),document.querySelector(".home_video-items").classList.add("home_video-items--playing"),v(void 0,!0);var t=b(c.video,c.featuredList);t&&(c.screen.pause(),c.video=t,c.isIntermissionState=!1,O(!1),s(function(){c.screen.play()},500))}function b(){if(c.video&&c.video.id){var e=c.video.id,t=void 0,n=r.findIndex(c.featuredList,function(t){return t.id===e});return n>0&&(t=c.featuredList[n-1]),t}}function L(e){e&&e.stopPropagation(),c.intermissionStopTimer&&o.cancel(c.intermissionStopTimer),O(!1),c.isPlaying=!0,c.featuredPlayerInside.classList.add("featured-player--playing"),c.imageLayer.classList.add("featured-player_hero-image-layer--playing"),c.bottomElements.classList.remove("hidden-layer"),c.screen.currentTime=0,c.isIntermissionState=!1,s(function(){c.screen.play()},500)}function S(e){e&&e.stopPropagation(),l.shareVideo(c.video.id)}function w(e){e&&e.stopPropagation(),c.video.favorites=!c.video.favorites,A(c.video.favorites),c.video.favorites?d.setLiked(c.hostName,c.token.access_token,c.video.id):d.deleteLiked(c.hostName,c.token.access_token,c.video.id)}function I(){c.video.isWatched=!0;var e=r.filter(c.videos,function(e){return e.id===c.video.id});e.isWatched=!0,c.$apply(),l.setVideoWatched(c.storage,c.hostName,c.video.id)}function k(){var e=1500;c.isPlaying&&!c.isIntermissionState&&(c.waitingTimer&&s.cancel(c.waitingTimer),q(!1),c.topElementsRightSide.classList.remove("hidden-layer"),c.buttonLayer.classList.add("player_buttons-layer--hover"),c.waitingTimer=s(function(){q(!0),c.topElementsRightSide.classList.add("hidden-layer"),c.buttonLayer.classList.remove("player_buttons-layer--hover")},e))}function P(e){var t={11:"movie",12:"tv",13:"games",14:"lifestyle"};return"featured-player_buttons-layer_bottom-elements_titles_current_category icon-category"+n.trustAsHtml(t[String(e)])}function x(e){var r=t(e),n=t();return n.to(r)}function $(){c.isPlaying&&!c.isIntermissionState&&(q(!1),c.topElementsRightSide.classList.remove("hidden-layer"),l.getElementFullscreenState()&&c.isIntermissionState?c.buttonLayer.classList.remove("featured-player_buttons-layer--hover"):c.buttonLayer.classList.add("featured-player_buttons-layer--hover"))}function T(){q(!0),c.topElementsRightSide.classList.add("hidden-layer"),c.buttonLayer.classList.remove("featured-player_buttons-layer--hover")}function C(e){return e&&e.stopPropagation(),i(function(e){l.toggleFullScreen(c).then(function(){var t=l.getElementFullscreenState();B(t),e()})})}function q(e){if(!c.isIntermissionState){var t="undefined"!=typeof e?!e:c.controlsOverlayLayer.classList.contains("hidden-layer");s(function(){c.$broadcast("rzSliderForceRender")}),t?(M(!0),E(c.screen.paused?!1:!0)):M(!1)}}function V(t){return t&&t.stopPropagation(),c.isPlaying=!0,c.featuredPlayerInside.classList.add("featured-player--playing"),c.imageLayer.classList.add("featured-player_hero-image-layer--playing"),c.bottomElements.classList.remove("hidden-layer"),document.querySelector(".home_video-items").classList.add("home_video-items--playing"),c.isIntermissionState?(c.isIntermissionState=!1,v(void 0,!0),void f()):(F(!0),k(),s(function(){c.$broadcast("rzSliderForceRender")}),void(c.screen.paused?(c.screen.play(),e.info("start playing"),E(!0)):(c.screen.pause(),e.info("set to pause"),E(!1))))}function N(e){return e?"add":"remove"}function E(e){c.pauseButton.classList[N(!e)]("hidden-layer"),c.playButton.classList[N(e)]("hidden-layer")}function F(e){u[0].classList[N(e)]("featured-player--play-state"),c.currentTitle.classList[N(e)]("featured-player_buttons-layer_bottom-elements_titles_current_title--play-state"),c.currentBlock.classList[N(e)]("featured-player_buttons-layer_bottom-elements_titles_current--play-state"),c.titlesOverlayLayer.classList[N(!e)]("featured-player_buttons-layer_bottom-elements_titles--hero-image"),c.titlesOverlayLayer.classList[N(!e)]("hidden-layer"),c.controlsOverlayLayer.classList[N(!e)]("hidden-layer")}function M(e){c.titlesOverlayLayer.classList[N(!e)]("hidden-layer"),c.controlsOverlayLayer.classList[N(!e)]("hidden-layer"),c.playButton.classList[N(!e)]("hidden-layer"),c.pauseButton.classList[N(!e)]("hidden-layer"),c.topElementsRightSide.classList[N(!e)]("hidden-layer"),c.buttonLayer.classList[N(e)]("featured-player_buttons-layer--show-buttons")}function B(e){c.descriptionLayer.classList[N(e)]("featured-player_description-layer--fullscreen"),c.buttonLayer.classList[N(e)]("featured-player_buttons-layer--fullscreen"),c.buttonLayer.classList[N(!e)]("featured-player_buttons-layer--hover"),c.expandButton.classList[N(e)]("hidden-layer"),c.collapseButton.classList[N(!e)]("hidden-layer")}function O(e){if(e){var t=angular.element(u[0].querySelector("#featured-carousel-video-"+c.video.id))[0];t&&(c.carouselItemIntermissionLayer=angular.element(t.querySelector(".featured-carousel_content_item_intermission"))[0],c.carouselItemIntermissionImage=angular.element(t.querySelector(".featured-carousel_content_item_image"))[0],c.carouselItemPlay=angular.element(t.querySelector(".featured-carousel_content_item_overlay"))[0]),c.carouselItemIntermissionLayer.classList[N(!1)]("hidden-layer"),c.carouselItemIntermissionImage.classList[N(!0)]("featured-carousel_content_item_image--intermission"),c.carouselItemPlay.classList[N(!0)]("hidden-layer")}else r.each(angular.element(u[0].querySelectorAll(".featured-carousel_content_item")),function(e){angular.element(e.querySelector(".featured-carousel_content_item_intermission"))[0].classList[N(!0)]("hidden-layer"),angular.element(e.querySelector(".featured-carousel_content_item_image"))[0].classList[N(!1)]("featured-carousel_content_item_image--intermission"),angular.element(e.querySelector(".featured-carousel_content_item_overlay"))[0].classList[N(!1)]("hidden-layer")});c.imageLayer.classList[N(e)]("hidden-layer"),c.buttonLayer.classList.remove("player_buttons-layer--hover"),c.buttonLayer.classList[N(e)]("featured-player_buttons-layer--intermission"),c.prevButton.classList[N(!e)]("hidden-layer"),c.nextButton.classList[N(!e)]("hidden-layer"),c.countDown.classList[N(!e)]("hidden-layer"),c.intermissionTitle.classList[N(!e)]("hidden-layer"),c.intermissionPause.classList[N(!e)]("hidden-layer"),c.titlesOverlayLayer.classList[N(e)]("hidden-layer"),c.controlsOverlayLayer.classList[N(e)]("hidden-layer"),c.imageNextLayer.classList[N(!e)]("hidden-layer"),c.videoLayer.classList[N(e)]("hidden-layer"),c.centerControlGroup.classList[N(e)]("featured-player_buttons-layer_center-elements_group--intermission"),E(!1)}function A(e){c.favoritesButton.classList[N(e)]("icon-favorites-filled"),c.favoritesButton.classList[N(!e)]("icon-favorites")}function R(e){c.descriptionLayer.classList[N(!e)]("hidden-layer"),c.titlesOverlayLayer.classList[N(e)]("hidden-layer"),l.getElementFullscreenState()?c.buttonLayer.classList[N(!e)]("featured-player_buttons-layer--fullscreen"):c.buttonLayer.classList[N(!1)]("featured-player_buttons-layer--fullscreen"),c.controlsOverlayLayer.classList[N(e)]("hidden-layer"),c.topElementsRightSide.classList[N(e)]("hidden-layer"),e?(c.playButton.classList[N(e)]("hidden-layer"),c.pauseButton.classList[N(e)]("hidden-layer")):E(c.screen.paused?!1:!0)}c=angular.extend(c,{isPlaying:!1,isIntermissionState:!1,isIntermissionPaused:!1,intermissionCountdownValue:0,intermissionCountdownMax:100,screenList:angular.element(u[0].querySelector("div.video-layer video")),screen:angular.element(u[0].querySelector("div.video-layer video"))[0],sliderModel:new p,featuredPlayer:angular.element(document.querySelector("featured-player"))[0],featuredPlayerInside:angular.element(document.querySelector(".featured-player"))[0],titlesOverlayLayer:angular.element(u[0].querySelector(".featured-player_buttons-layer_bottom-elements_titles"))[0],controlsOverlayLayer:angular.element(u[0].querySelector(".featured-player_buttons-layer_bottom-elements_controls"))[0],topElementsLayer:angular.element(u[0].querySelector(".featured-player_buttons-layer_top-elements"))[0],topElementsClose:angular.element(u[0].querySelector(".featured-player_buttons-layer_top-elements_close-button"))[0],topElementsRightSide:angular.element(u[0].querySelector(".featured-player_buttons-layer_top-elements_rightside"))[0],currentTitle:angular.element(u[0].querySelector(".featured-player_buttons-layer_bottom-elements_titles_current_title"))[0],currentBlock:angular.element(u[0].querySelector(".featured-player_buttons-layer_bottom-elements_titles_current"))[0],buttonLayer:angular.element(u[0].querySelectorAll(".featured-player_buttons-layer"))[0],videoLayer:angular.element(u[0].querySelector("div.video-layer"))[0],imageLayer:angular.element(u[0].querySelector(".featured-player_hero-image-layer"))[0],imageNextLayer:angular.element(u[0].querySelector("div.featured-player_hero-image-layer-next"))[0],descriptionLayer:angular.element(u[0].querySelector("div.featured-player_description-layer"))[0],playButton:angular.element(u[0].querySelector(".featured-player_buttons-layer_center-elements_play-button"))[0],pauseButton:angular.element(u[0].querySelector(".featured-player_buttons-layer_center-elements_pause-button"))[0],centerControlGroup:angular.element(u[0].querySelector(".featured-player_buttons-layer_center-elements_group"))[0],favoritesButton:angular.element(u[0].querySelector(".featured-player_buttons-layer_top-elements_rightside_buttons_favorites"))[0],prevButton:angular.element(u[0].querySelector(".featured-player_buttons-layer_center-elements_prev"))[0],nextButton:angular.element(u[0].querySelector(".featured-player_buttons-layer_center-elements_next"))[0],countDown:angular.element(u[0].querySelector(".featured-player_buttons-layer_center-elements_group_controls_progress"))[0],intermissionTitle:angular.element(u[0].querySelector(".featured-player_buttons-layer_center-elements_group_title"))[0],intermissionPause:angular.element(u[0].querySelector(".featured-player_buttons-layer_center-elements_group_bottom"))[0],bottomElements:angular.element(u[0].querySelector(".featured-player_buttons-layer_bottom-elements"))[0],slider:angular.element(u[0].querySelector(".featured-player_buttons-layer_bottom-elements_controls_slider"))[0],expandButton:angular.element(u[0].querySelector(".featured-player_buttons-layer_bottom-elements_controls_expand"))[0],collapseButton:angular.element(u[0].querySelector(".featured-player_buttons-layer_bottom-elements_controls_collapse"))[0],togglePlayPause:V,imageHover:$,imageBlur:T,toggleFullScreen:C,toggleControlsVisibility:q,toggleDescription:y,setIntermission:g,pauseIntermissionToggle:v,nextVideo:_(),playNextVideo:f,getNextVideo:_,playPreviousVideo:h,getPreviousVideo:b,replayVideo:L,shareVideo:S,toggleFavorites:w,setWatched:I,showControlsOnMove:k}),a.yOffset=150,c.screenList.bind("timeupdate",function(){c.timePassed=t().startOf("year").add(c.screen.currentTime,"s").format("mm:ss"),c.duration=t().startOf("year").add(c.screen.duration,"s").format("mm:ss"),c.sliderModel.value=c.screen.currentTime,c.sliderModel.options.ceil=c.screen.duration,c.$apply(),c.video.isWatched||c.screen.currentTime>.75*c.screen.duration&&I()}),c.screenList.bind("ended",function(){l.getElementFullscreenState()?C().then(function(){c.setIntermission()}):c.setIntermission()}),c.$watch("video",function(){c.video&&c.video.streams&&(c.sources=c.video.streams.map(function(e){return{src:n.trustAsResourceUrl(e.link),type:"video/"+e.stream_type}}),c.iconTitle=c.video&&c.video.category_id?P(c.video.category_id):"",c.createdDate=c.video&&c.video.created_at?x(c.video.created_at):void 0,c.nextVideo=_(),c.isIntermissionPaused=!1,A(c.video.favorites),s(function(){!c.featuredPlayer.classList.contains("hidden-layer")&&c.video.instantPlay&&(V(),c.video.instantPlay=!1),r.each(angular.element(u[0].querySelectorAll(".featured-carousel_content_item")),function(e){angular.element(e.querySelector(".featured-carousel_content_item_title"))[0].classList.remove("featured-carousel_content_item_title--playing")});var e=angular.element(u[0].querySelector("#featured-carousel-video-"+c.video.id))[0];e&&(c.carouselItemTitle=angular.element(e.querySelector(".featured-carousel_content_item_title"))[0],c.carouselItemTitle.classList.add("featured-carousel_content_item_title--playing"))}))})}return{restrict:"E",templateUrl:"components/featured-player/featuredPlayer.html",link:u,transclude:!0,scope:{video:"=",featuredList:"=",featuredItem:"=",categoriesList:"=",hostName:"@",storage:"=",videos:"="}}}function menu(e,t,r,n,s){function a(a){function i(e,t,r){e?t.classList.add(r):t.classList.remove(r)}function o(e){var t="undefined"!=typeof e?e:a.isMenuVisible;t?(a.isMenuVisible=!1,a.menuContainer.classList.remove("menu_container--menu-visible"),a.navbar.classList.remove("navbar--menu-visible"),a.menuContainerOuter.classList.remove("menu_container_outer--menu-visible"),a.categoriesPanel.classList.remove("categories-panel--menu-visible")):(a.isMenuVisible=!0,a.menuContainer.classList.add("menu_container--menu-visible"),a.navbar.classList.add("navbar--menu-visible"),a.menuContainerOuter.classList.add("menu_container_outer--menu-visible"),a.categoriesPanel.classList.add("categories-panel--menu-visible"))}function l(e){a.searchText="",a.searchResult=[],a.searchedVideo=e,c(!1)}function c(e){i(!e,a.searchMenu,"hidden-layer"),i(!e,a.searchResults,"hidden-layer"),i(e,a.mainMenu,"hidden-layer"),e&&a.searchInput.focus()}function d(){a.searchText="",a.searchResult=[],a.searchInput.focus()}function u(n){return t(function(t){function s(e){r.info("search list obtained"),t(e)}function i(e){r.info("search list obtaining error with status "+e.status),reject(e)}e({method:"GET",url:a.host+"/search?search="+n}).then(s,i)})}function m(){a.searchText.length>2&&a.debouncedSearch()}function p(e){var t={11:"movie",12:"tv",13:"games",14:"lifestyle"};return n.trustAsHtml(t[String(e)])}function y(){s.go("login")}var g=300;a=angular.extend(a,{isMenuVisible:!1,searchText:"",searchResult:[],menuContainer:document.querySelector(".menu_container"),navbar:document.querySelector(".navbar"),menuContainerOuter:document.querySelector(".menu_container_outer"),categoriesPanel:document.querySelector(".categories-panel"),mainMenu:document.querySelector(".navbar-main"),searchMenu:document.querySelector(".navbar_search"),searchResults:document.querySelector(".search-results"),backToMainButton:document.querySelector(".navbar_search_back"),searchInput:document.querySelector(".navbar_search_input"),clearSearchButton:document.querySelector(".navbar_search_clear"),toggleMenu:o,toggleMenuType:c,searchItemClick:l,clearSearchInput:d,searchInputUpdate:m,categoryIconMap:p,debouncedSearch:_.debounce(function(){u(a.searchText).then(function(e){a.searchResult=e.data.data})},g),signInClick:y})}return{restrict:"E",templateUrl:"components/menu/menu.html",link:a,transclude:!1,scope:{host:"=",searchedVideo:"="}}}function playItems(e,t,r){function n(n){function s(e,r){var n=void 0;return n=parseInt(r)?t.filter(e,function(e){return e.category_id===parseInt(r)}):e}function a(e,r){var n=void 0;if(parseInt(r)){var s=t.find(e,function(e){return e.id===parseInt(r)});s&&s.title&&(n=s.title)}else n="All";return n}function i(t){e.go("play",{videoId:t})}n=angular.extend(n,{videosList:[],title:"",iconName:r.getIconName(n.categoryId),moveToPlayPage:i}),n.$watch("videos",function(e){n.videosList=s(e,n.categoryId)}),n.$watch("categoryId",function(){n.iconName=r.getIconName(n.categoryId),n.title=a(n.categories,n.categoryId)})}return{restrict:"E",templateUrl:"components/play-items/playItems.html",link:n,transclude:!1,scope:{videos:"=",categoryId:"@",categories:"="}}}function showPlayer(e,t,r,n,s,a,i,o,l){function c(c,d,u){function m(){return{start:0,value:0,options:{floor:0,ceil:500,hideLimitLabels:!0,onChange:function(){console.log("change to "+c.sliderModel.value),c.sliderModel.start>0&&(c.sliderModel.value=c.sliderModel.start,c.sliderModel.start=0),c.screen.currentTime=c.sliderModel.value}}}}function p(e,t){e&&e.stopPropagation(),O(t)}function y(){c.isIntermissionState=!0,x(),M(!0),c.intermissionCountdownValue=0,A(!1),c.intermissionStopTimer=o(function(){c.intermissionCountdownValue++,c.intermissionCountdownValue>c.intermissionCountdownMax&&(o.cancel(c.intermissionStopTimer),c.playNextVideo())},50)}function g(e,t){e&&e.stopPropagation(),t&&(c.isIntermissionPaused=!1,c.intermissionStopTimer&&o.cancel(c.intermissionStopTimer)),c.isIntermissionPaused?(c.intermissionStopTimer=o(function(){c.intermissionCountdownValue++,c.intermissionCountdownValue>c.intermissionCountdownMax&&(o.cancel(c.intermissionStopTimer),c.playNextVideo())},50),c.isIntermissionPaused=!1):(c.intermissionStopTimer&&o.cancel(c.intermissionStopTimer),c.isIntermissionPaused=!0)}function v(){if(c.video){var e=c.video.id,t=void 0,n=r.findIndex(c.videosList,function(t){return t.id===e});return n+1<c.videosList.length&&(t=c.videosList[n+1]),
t}}function _(e){e&&e.stopPropagation(),A(!0),g(void 0,!0);var t=v();t?(c.screen.pause(),c.video=t,c.isIntermissionState=!1,M(!1),s(function(){c.screen.play()},500)):c.screen.pause()}function f(e){e&&e.stopPropagation(),A(!0),g(void 0,!0);var t=h(c.video,c.videosList);t&&(c.screen.pause(),l.getElementFullscreenState()&&$(!0),c.video=t,c.isIntermissionState=!1,M(!1),s(function(){c.screen.play()},500))}function h(){if(c.video&&c.video.id){var e=c.video.id,t=void 0,n=r.findIndex(c.videosList,function(t){return t.id===e});return n>0&&(t=c.videosList[n-1]),t}}function b(){event&&event.stopPropagation(),c.intermissionStopTimer&&o.cancel(c.intermissionStopTimer),M(!1),c.isPlaying=!0,c.showPlayerInside.classList.add("show-player--playing"),c.imageLayer.classList.add("show-player_hero-image-layer--playing"),c.bottomElements.classList.remove("hidden-layer"),c.screen.currentTime=0,c.isIntermissionState=!1,s(function(){c.screen.play()},500)}function L(e){e&&e.stopPropagation(),l.shareVideo(c.video.id)}function S(e){e&&e.stopPropagation(),c.video.favorites=!c.video.favorites,B(c.video.favorites),c.video.favorites?userServ.setLiked(c.hostName,c.token.access_token,c.video.id):userServ.deleteLiked(c.hostName,c.token.access_token,c.video.id)}function w(){var e=1500;c.isPlaying&&!c.isIntermissionState&&(c.waitingTimer&&s.cancel(c.waitingTimer),T(!1),c.topElementsRightSide.classList.remove("hidden-layer"),c.buttonLayer.classList.add("player_buttons-layer--hover"),c.waitingTimer=s(function(){T(!0),c.topElementsRightSide.classList.add("hidden-layer"),c.buttonLayer.classList.remove("player_buttons-layer--hover")},e))}function I(e){var t={11:"movie",12:"tv",13:"games",14:"lifestyle"};return"show-player_buttons-layer_bottom-elements_titles_current_category icon-category"+n.trustAsHtml(t[String(e)])}function k(e){var r=t(e),n=t();return n.to(r)}function P(){c.isPlaying&&!c.isIntermissionState&&(T(!1),c.topElementsRightSide.classList.remove("hidden-layer"),l.getElementFullscreenState()&&c.isIntermissionState?c.buttonLayer.classList.remove("show-player_buttons-layer--hover"):c.buttonLayer.classList.add("show-player_buttons-layer--hover"))}function x(){T(!0),c.topElementsRightSide.classList.add("hidden-layer"),c.buttonLayer.classList.remove("show-player_buttons-layer--hover")}function $(e){return e&&e.stopPropagation(),i(function(e){l.toggleFullScreen(c).then(function(){var t=l.getElementFullscreenState();F(t),e()})})}function T(e){if(!c.isIntermissionState){var t="undefined"!=typeof e?!e:c.controlsOverlayLayer.classList.contains("hidden-layer");s(function(){c.$broadcast("rzSliderForceRender")}),t?(E(!0),V(c.screen.paused?!1:!0)):E(!1)}}function C(t){return t&&t.stopPropagation(),A(!0),c.isIntermissionState?(c.isIntermissionState=!1,g(void 0,!0),void _()):(N(!0),s(function(){c.$broadcast("rzSliderForceRender")}),void(c.screen.paused?(c.screen.play(),e.info("start playing"),V(!0)):(c.screen.pause(),e.info("set to pause"),V(!1))))}function q(e){return e?"add":"remove"}function V(e){c.pauseButton.classList[q(!e)]("hidden-layer"),c.playButton.classList[q(e)]("hidden-layer")}function N(e){d[0].classList[q(e)]("show-player--play-state"),c.currentTitle.classList[q(e)]("show-player_buttons-layer_bottom-elements_titles_current_title--play-state"),c.currentBlock.classList[q(e)]("show-player_buttons-layer_bottom-elements_titles_current--play-state"),c.titlesOverlayLayer.classList[q(!e)]("show-player_buttons-layer_bottom-elements_titles--hero-image"),c.titlesOverlayLayer.classList[q(!e)]("hidden-layer"),c.controlsOverlayLayer.classList[q(!e)]("hidden-layer")}function E(e){c.titlesOverlayLayer.classList[q(!e)]("hidden-layer"),c.controlsOverlayLayer.classList[q(!e)]("hidden-layer"),c.playButton.classList[q(!e)]("hidden-layer"),c.pauseButton.classList[q(!e)]("hidden-layer"),c.topElementsRightSide.classList[q(!e)]("hidden-layer"),c.buttonLayer.classList[q(e)]("show-player_buttons-layer--show-buttons")}function F(e){c.descriptionLayer.classList[q(e)]("show-player_description-layer--fullscreen"),c.buttonLayer.classList[q(e)]("show-player_buttons-layer--fullscreen"),c.buttonLayer.classList[q(!e)]("show-player_buttons-layer--hover"),c.expandButton.classList[q(e)]("hidden-layer"),c.collapseButton.classList[q(!e)]("hidden-layer")}function M(e){if(e){var t=angular.element(d[0].querySelector("#featured-carousel-video-"+c.video.id))[0];t&&(c.carouselItemIntermissionLayer=angular.element(t.querySelector(".featured-carousel_content_item_intermission"))[0],c.carouselItemIntermissionImage=angular.element(t.querySelector(".featured-carousel_content_item_image"))[0],c.carouselItemIntermissionLayer.classList[q(!1)]("hidden-layer"),c.carouselItemIntermissionImage.classList[q(!0)]("featured-carousel_content_item_image--intermission"))}else r.each(angular.element(d[0].querySelectorAll(".featured-carousel_content_item")),function(e){angular.element(e.querySelector(".featured-carousel_content_item_intermission"))[0].classList[q(!0)]("hidden-layer"),angular.element(e.querySelector(".featured-carousel_content_item_image"))[0].classList[q(!1)]("featured-carousel_content_item_image--intermission")});c.imageLayer.classList[q(e)]("hidden-layer"),c.buttonLayer.classList.remove("player_buttons-layer--hover"),c.buttonLayer.classList[q(e)]("show-player_buttons-layer--intermission"),c.prevButton.classList[q(!e)]("hidden-layer"),c.nextButton.classList[q(!e)]("hidden-layer"),c.countDown.classList[q(!e)]("hidden-layer"),c.intermissionTitle.classList[q(!e)]("hidden-layer"),c.intermissionPause.classList[q(!e)]("hidden-layer"),c.titlesOverlayLayer.classList[q(e)]("hidden-layer"),c.controlsOverlayLayer.classList[q(e)]("hidden-layer"),c.imageNextLayer.classList[q(!e)]("hidden-layer"),c.videoLayer.classList[q(e)]("hidden-layer"),c.centerControlGroup.classList[q(e)]("featured-player_buttons-layer_center-elements_group--intermission"),V(!1)}function B(e){c.favoritesButton.classList[q(e)]("icon-favorites-filled"),c.favoritesButton.classList[q(!e)]("icon-favorites")}function O(e){c.descriptionLayer.classList[q(!e)]("hidden-layer"),c.titlesOverlayLayer.classList[q(e)]("hidden-layer"),l.getElementFullscreenState()?c.buttonLayer.classList[q(!e)]("show-player_buttons-layer--fullscreen"):c.buttonLayer.classList[q(!1)]("show-player_buttons-layer--fullscreen"),c.controlsOverlayLayer.classList[q(e)]("hidden-layer"),c.topElementsRightSide.classList[q(e)]("hidden-layer"),e?(c.playButton.classList[q(e)]("hidden-layer"),c.pauseButton.classList[q(e)]("hidden-layer")):V(c.screen.paused?!1:!0)}function A(e){r.each(angular.element(document.querySelectorAll(".play-items_videos_item_title")),function(e){e.classList.remove("play-items_videos_item_title--playing")});var t=angular.element(document.querySelector("#play-video-item-"+c.video.id))[0];if(t){var n=angular.element(t.querySelector(".play-items_videos_item_title"))[0];n&&n.classList.add("play-items_videos_item_title--playing")}c.isPlaying=e,c.showPlayerInside.classList[q(e)]("show-player--playing"),c.imageLayer.classList[q(e)]("show-player_hero-image-layer--playing"),c.bottomElements.classList[q(!e)]("hidden-layer"),document.querySelector(".play_video-items").classList[q(e)]("play_video-items--playing")}c=angular.extend(c,{isPlaying:!1,isIntermissionState:!1,isIntermissionPaused:!1,intermissionCountdownValue:0,intermissionCountdownMax:100,screenList:angular.element(d[0].querySelector("div.video-layer video")),screen:angular.element(d[0].querySelector("div.video-layer video"))[0],sliderModel:new m,showPlayer:angular.element(document.querySelector("show-player"))[0],showPlayerInside:angular.element(document.querySelector(".show-player"))[0],titlesOverlayLayer:angular.element(d[0].querySelector(".show-player_buttons-layer_bottom-elements_titles"))[0],controlsOverlayLayer:angular.element(d[0].querySelector(".show-player_buttons-layer_bottom-elements_controls"))[0],topElementsLayer:angular.element(d[0].querySelector(".show-player_buttons-layer_top-elements"))[0],topElementsClose:angular.element(d[0].querySelector(".show-player_buttons-layer_top-elements_close-button"))[0],topElementsRightSide:angular.element(d[0].querySelector(".show-player_buttons-layer_top-elements_rightside"))[0],currentTitle:angular.element(d[0].querySelector(".show-player_buttons-layer_bottom-elements_titles_current_title"))[0],currentBlock:angular.element(d[0].querySelector(".show-player_buttons-layer_bottom-elements_titles_current"))[0],buttonLayer:angular.element(d[0].querySelectorAll(".show-player_buttons-layer"))[0],videoLayer:angular.element(d[0].querySelector("div.video-layer"))[0],imageLayer:angular.element(d[0].querySelector(".show-player_hero-image-layer"))[0],imageNextLayer:angular.element(d[0].querySelector("div.show-player_hero-image-layer-next"))[0],descriptionLayer:angular.element(d[0].querySelector("div.show-player_description-layer"))[0],playButton:angular.element(d[0].querySelector(".show-player_buttons-layer_center-elements_play-button"))[0],pauseButton:angular.element(d[0].querySelector(".show-player_buttons-layer_center-elements_pause-button"))[0],centerControlGroup:angular.element(d[0].querySelector(".featured-player_buttons-layer_center-elements_group"))[0],favoritesButton:angular.element(d[0].querySelector(".featured-player_buttons-layer_top-elements_rightside_buttons_favorites"))[0],prevButton:angular.element(d[0].querySelector(".show-player_buttons-layer_center-elements_prev"))[0],nextButton:angular.element(d[0].querySelector(".show-player_buttons-layer_center-elements_next"))[0],countDown:angular.element(d[0].querySelector(".show-player_buttons-layer_center-elements_group_controls_progress"))[0],intermissionTitle:angular.element(d[0].querySelector(".show-player_buttons-layer_center-elements_group_title"))[0],intermissionPause:angular.element(d[0].querySelector(".show-player_buttons-layer_center-elements_group_bottom"))[0],bottomElements:angular.element(d[0].querySelector(".show-player_buttons-layer_bottom-elements"))[0],slider:angular.element(d[0].querySelector(".show-player_buttons-layer_bottom-elements_controls_slider"))[0],expandButton:angular.element(d[0].querySelector(".show-player_buttons-layer_bottom-elements_controls_expand"))[0],collapseButton:angular.element(d[0].querySelector(".show-player_buttons-layer_bottom-elements_controls_collapse"))[0],togglePlayPause:C,imageHover:P,imageBlur:x,toggleFullScreen:$,toggleControlsVisibility:T,toggleDescription:p,setIntermission:y,pauseIntermissionToggle:g,nextVideo:v(),playNextVideo:_,getNextVideo:v,playPreviousVideo:f,getPreviousVideo:h,replayVideo:b,shareVideo:L,toggleFavorites:S,showControlsOnMove:w}),a.yOffset=150,c.screenList.bind("timeupdate",function(){c.timePassed=t().startOf("year").add(c.screen.currentTime,"s").format("mm:ss"),c.duration=t().startOf("year").add(c.screen.duration,"s").format("mm:ss"),c.sliderModel.value=c.screen.currentTime,c.sliderModel.options.ceil=c.screen.duration,c.$apply()}),c.screenList.bind("ended",function(){l.getElementFullscreenState()?$().then(function(){c.setIntermission()}):c.setIntermission()}),c.$watch("video",function(){c.video&&c.video.streams&&(c.sources=c.video.streams.map(function(e){return{src:n.trustAsResourceUrl(e.link),type:"video/"+e.stream_type}}),c.iconTitle=c.video&&c.video.category_id?I(c.video.category_id):"",c.createdDate=c.video&&c.video.created_at?k(c.video.created_at):void 0,c.nextVideo=v(),c.isIntermissionPaused=!1,B(c.video.favorites),s(function(){!c.showPlayer.classList.contains("hidden-layer")&&c.video.instantPlay&&(C(),c.video.instantPlay=!1),r.each(angular.element(d[0].querySelectorAll(".featured-carousel_content_item")),function(e){angular.element(e.querySelector(".featured-carousel_content_item_title"))[0].classList.remove("featured-carousel_content_item_title--playing")});var e=angular.element(d[0].querySelector("#featured-carousel-video-"+c.video.id))[0];e&&(c.carouselItemTitle=angular.element(e.querySelector(".featured-carousel_content_item_title"))[0],c.carouselItemTitle.classList.add("featured-carousel_content_item_title--playing"))}))}),c.$watch("featuredItem",function(){c.featuredItem&&(c.video=c.featuredItem)})}return{restrict:"E",templateUrl:"components/show-player/showPlayer.html",link:c,transclude:!0,scope:{video:"=",videosList:"=",featuredList:"=",featuredItem:"=",hostName:"@"}}}function topMenu(e,t,r,n,s,a,i,o){function l(r){function s(){e.go("home")}function a(){e.go("login")}function l(n,s){if(n&&n.stopPropagation(),e.includes("home")||e.includes("main"))t("category-videos-"+s);else if(r.videosList&&r.videosList.length)if(0===Number(s))e.go("play",{videoId:r.videosList[0].id,categoryId:s});else{var a=o.filter(r.videosList,function(e){return e.category_id===Number(s)});a.length&&e.go("play",{videoId:a[0].id,categoryId:s})}}function d(){n(function(){r.searchText.length>2?c(r.hostName,r.searchText).then(function(e){e.length?(o.each(e,function(e){e.iconName=i.getIconName(e.category_id)}),r.searchResult=e):r.searchResult=[]}):r.searchResult=[]},200)}function u(t){r.searchResult=[],r.searchText="",e.go("play",{videoId:t,categoryId:0})}r=angular.extend(r,{categoryList:void 0,searchText:"",searchResult:[],moveToHome:s,moveToLogin:a,categoryClick:l,search:d,playFoundVideo:u}),r.$watch("categories",function(e){e&&(r.categoryList=e)})}function c(e,t){return s(function(n,s){function i(e){a.info("searched videos found"),n(e.data.data)}function o(e){a.info("searched videos returned error with status "+e.status),s(e)}r({method:"GET",url:e+"/search",params:{search:t}}).then(i,o)})}return{restrict:"E",templateUrl:"components/top-menu/top-menu.html",link:l,transclude:!1,scope:{categories:"=",hostName:"@",videosList:"="}}}function HomeCtrl(e,t,r,n,s,a){e=angular.extend(e,{featuredList:[],featuredItem:void 0}),r.getFeaturedList(e).then(r.getCategories).then(r.getVideos).then(r.updateVideos).then(function(r){t.featuredList=e.featuredList,t.videosList=r,e.featuredList&&e.featuredList.length&&(e.featuredItem=e.featuredList[0])}),e.userAuthorized&&n.getLiked(e.hostName,e.storage.token.access_token).then(function(t){var r=s.map(t,function(e){return e.id}),n=a.getItem(e.storage.storageFavoritesKey),i=s.union(r,n);a.setItem(e.storage.storageFavoritesKey,i),e.storage.favoritesItems=i})}function ListCtrl(e,t,r,n){e=angular.extend(e,{})}function LoginCtrl(e,t,r,n){function s(){r.login(e.hostName,{login:e.login.email,password:e.login.password}).then(function(r){n.setItem(e.storage.storageUserToken,r.data),e.storage.token=r.data,e.userAuthorized=!0,t.go("home")})}function a(){t.go("register")}e=angular.extend(e,{login:{email:"",password:""},processLogin:s,registerClick:a})}function PlayCtrl(e,t,r,n,s,a){function i(){if(e=angular.extend(e,{featuredItem:t.featuredList&&t.featuredList?t.featuredList[0]:e.featuredList[0],videoItem:void 0,videoCategoryId:void 0,categoriesList:t.categoriesList}),e.videosList&&e.videosList.length||(e.videosList=t.videosList),e.featuredList&&e.featuredList.length||(e.featuredList=t.featuredList),r.categoryId&&"0"!==r.categoryId){e.videoCategoryId=Number(r.categoryId);var s=n.filter(e.videosList,function(e){return e.category_id===Number(r.categoryId)});e.featuredList?e.videosList=n.unionBy(e.featuredList,s,"id"):e.videosList=s}else e.featuredList?e.videosList=n.unionBy(e.featuredList,t.videosList,"id"):e.videosList=e.videosList;if(Number(r.videoId)){var a=n.find(e.videosList,function(e){return e.id===Number(r.videoId)});a.instantPlay=!0,e.videoItem=a}}t.featuredList&&t.featuredList.length&&t.videosList&&t.videosList.length?i():s.getFeaturedList(e).then(s.getCategories).then(s.getVideos).then(s.updateVideos).then(function(t){e.userAuthorized&&a.getLiked(e.hostName,e.storage.token.access_token).then(function(e){n.each(t,function(t){var r=n.filter(e,function(e){return e.id===t.id});t.favorites=!!r.length})})}).then(i)}function RegisterCtrl(e,t,r,n){function s(){var s=n({year:e.register.year,month:e.register.month.key+1,day:e.register.day});s.isValid()?r.registerUser(e.hostName,{email:e.register.email,password:e.register.password,password_confirmation:e.register.password,birthday:s.format("YYYY-MM-DDTHH:mm:ss.SSS")+"Z"}):t.log("date error")}function a(){r.facebookAuth(e.hostName)}var i=[{key:0,name:"January"},{key:1,name:"February"},{key:2,name:"March"},{key:3,name:"April"},{key:4,name:"May"},{key:5,name:"June"},{key:6,name:"July"},{key:7,name:"August"},{key:8,name:"September"},{key:9,name:"October"},{key:10,name:"November"},{key:11,name:"December"}];e=angular.extend(e,{register:{email:"",password:"",month:0,day:"",year:""},months:i,registerUser:s,facebookRegister:a})}function ShareCtrl(e,t,r,n,s,a){function i(){if(r.videoId){var s=n.filter(t.videosList,function(e){return e.id===Number(r.videoId)});s.length&&(e.video=s[0],e.shareLink=e.sharingPath+"#/videos/"+e.video.id)}}function o(t){var r=e.sharingPath+"#/videos/"+e.video.id,n={facebook:"https://www.facebook.com/dialog/share?"+("app_id="+e.facebookAppIdStage+"&display=popup")+("&href="+encodeURIComponent(r))+("&redirect_uri="+encodeURIComponent(r)),google:"https://plus.google.com/share?url=",twitter:"https://twitter.com/home?status=",reddit:"https://www.reddit.com/submit?url="};if("facebook"!==t){var s=""+encodeURIComponent(r);window.location=n[t]+s}else window.location=n[t]}function l(){s.go("home")}e=angular.extend(e,{video:void 0,shareVideoItem:o,closeShare:l,shareLink:void 0}),t.videosList&&t.videosList.length?i():a.getVideos(e).then(a.updateVideos).then(function(){i()})}angular.module("app.helpers",[]),angular.module("app.controls",["ngSanitize"]),angular.module("app.wrappers",[]),angular.module("app.routerHelper",["ui.router","app.wrappers"]),angular.module("app.services",[]),angular.module("app.directives",["app.services","app.helpers"]),angular.module("templates",[]),angular.module("app",["app.services","app.controls","app.directives","app.routerHelper","app.wrappers","app.routes","ngSanitize","templates","rzModule","angular-svg-round-progress"]).controller("AppCtrl",AppCtrl),AppCtrl.$inject=["$scope","routerHelper","routesList","$state","storageServ","userServ","playerServ","$timeout"],angular.module("app.services").factory("categoriesServ",categoriesServ),categoriesServ.$inject=["$http","$q","$log"],angular.module("app.services").service("playerServ",playerServ),playerServ.$inject=["$q","$state","$rootScope","categoriesServ","videoServ","storageServ","userServ","lodash"],angular.module("app.helpers").factory("RecursionHelper",["$compile",function(e){return{compile:function(t,r){angular.isFunction(r)&&(r={post:r});var n,s=t.contents().remove();return{pre:r&&r.pre?r.pre:null,post:function(t,a){n||(n=e(s)),n(t,function(e){a.append(e)}),r&&r.post&&r.post.apply(null,arguments)}}}}}]),angular.module("templates").run(["$templateCache",function(e){e.put("index_template.html",'<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <title>Cizo</title>\r\n    <link rel="stylesheet" href="all.min.css">\r\n</head>\r\n<body ng-controller="AppCtrl">\r\n\r\n<div ui-view></div>\r\n\r\n<script src="3d-party.min.js"></script>\r\n<script src="ng.min.js"></script>\r\n<script>\r\n    angular.bootstrap(document, [\'app\']);\r\n</script>\r\n\r\n</body>\r\n</html>'),e.put("components/category-items/category-items.html",'<div class="category-items" id="category-videos-{{::categoryId}}">\r\n    <div class="category-items_title">\r\n        <span class="icon-category{{::iconName}} category-items_title_icon"></span>\r\n        <span class="category-items_title_name">{{::title}}</span>\r\n    </div>\r\n\r\n    <div class="category-items_videos">\r\n\r\n        <div class="category-items_videos_wrapper">\r\n            <div class="category-items_videos_item"\r\n                 ng-repeat="video in videosList"\r\n                 style="background-image: url(\'{{video.hero_images.hero_image_link_thumb_banner}}\')"\r\n                 ng-click="moveToPlayPage(video.id)"\r\n            >\r\n                <div class="category-items_videos_item_overlay">\r\n                    <span class="category-items_videos_item_overlay_button icon-play" ng-hide="video.isWatched"></span>\r\n                    <span class="category-items_videos_item_overlay_button icon-replay" ng-show="video.isWatched"></span>\r\n                </div>\r\n\r\n                <div class="category-items_videos_item_title">\r\n                    <span class="category-items_videos_item_title_date">{{::video.humanizedDate}}</span>\r\n                    <span class="category-items_videos_item_title_caption">{{::video.title}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="category-items_videos_item-view-all" ng-show="manyItems" ng-click="moveToPlayPage(videosList[0].id)">\r\n                <span class="category-items_videos_item-view-all_title">View all</span>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>'),e.put("components/featured-carousel/featured-carousel.html",'<div class="featured-carousel">\r\n    <button class="featured-carousel_left icon-back"  ng-click="movePrev()"></button>\r\n    <div class="featured-carousel_content">\r\n        <div class="featured-carousel_content_wrapper" ng-style="{\'margin-left\': itemsOffset}">\r\n            <div class="featured-carousel_content_item"\r\n                 ng-repeat="featured in featuredList"\r\n                 ng-click="playFeatured(featured.id)"\r\n                 ng-attr-id="{{\'featured-carousel-video-\' + featured.id}}"\r\n            >\r\n                <div class="featured-carousel_content_item_image" style="background-image: url(\'{{::featured.hero_images.hero_image_link_thumb_banner}}\')"></div>\r\n                <div class="featured-carousel_content_item_overlay">\r\n                    <span class="featured-carousel_content_item_overlay_button icon-play"></span>\r\n                </div>\r\n\r\n\r\n\r\n                <div class="featured-carousel_content_item_label">Featured</div>\r\n                <div class="featured-carousel_content_item_intermission hidden-layer">\r\n                    <span class="icon-share featured-carousel_content_item_intermission_button"></span>\r\n                    <span class="icon-replay featured-carousel_content_item_intermission_button" ng-click="replay()"></span>\r\n                </div>\r\n                <div class="featured-carousel_content_item_title">{{::featured.title}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <button class="featured-carousel_right icon-forward" ng-click="moveNext()"></button>\r\n</div>'),e.put("components/featured-player/featuredPlayer.html",'\r\n\r\n<div class="featured-player" video-id="{{video.id}}">\r\n    <top-menu categories="categoriesList" host-name="{{hostName}}"></top-menu>\r\n    <!-- video layer -->\r\n    <div class="video-layer featured-player_video-layer">\r\n        <video class="featured-player_video-layer_video" video-src="sources" preload=\'none\'></video>\r\n    </div>\r\n\r\n    <!-- next hero image layer -->\r\n    <div class="col-xs-12 no-padding hero-image-layer featured-player_hero-image-layer-next hidden-layer" style="background-image: url({{nextVideo.hero_images.hero_image_link}})">\r\n    </div>\r\n\r\n    <featured-carousel featured-list="featuredList" selected-video="featuredItem" on-replay="replayVideo()"></featured-carousel>\r\n</div>\r\n\r\n<!-- description layer-->\r\n<div class="col-xs-12 no-padding featured-player_description-layer hidden-layer">\r\n    <div class="featured-player_description-layer_container">\r\n        <div class="featured-player_description-layer_container_close-container">\r\n            <div class="featured-player_description-layer_container_close-container_button icon-close" ng-click="toggleDescription($event, false)"></div>\r\n        </div>\r\n\r\n        <div class="featured-player_description-layer_container_titles">\r\n            <div class="featured-player_description-layer_container_titles_category icon-category{{iconTitle}}"></div>\r\n\r\n            <div class="featured-player_description-layer_container_titles_labels">\r\n                        <span class="featured-player_description-layer_container_titles_labels_created">\r\n                            {{createdDate}}\r\n                        </span>\r\n                        <span class="featured-player_description-layer_container_titles_labels_title">\r\n                            {{video.title}}\r\n                        </span>\r\n            </div>\r\n        </div>\r\n        <div class="featured-player_description-layer_container_text">\r\n            {{video.description}}\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- buttons layer-->\r\n<div class="featured-player_buttons-layer"\r\n     ng-mouseenter="imageHover()"\r\n     ng-mouseleave="imageBlur()"\r\n     ng-click="togglePlayPause()"\r\n     ng-dblclick="toggleFullScreen()"\r\n     ng-mousemove="showControlsOnMove()"\r\n>\r\n    <!-- top buttons-->\r\n    <div class="featured-player_buttons-layer_top-elements">\r\n        <div>\r\n\r\n        </div>\r\n\r\n\r\n        <div class="featured-player_buttons-layer_top-elements_rightside">\r\n            <span class="icon-favorites featured-player_buttons-layer_top-elements_rightside_buttons featured-player_buttons-layer_top-elements_rightside_buttons_favorites"\r\n                  ng-click="toggleFavorites($event)"  ></span>\r\n            <span class="icon-info featured-player_buttons-layer_top-elements_rightside_buttons" ng-click="toggleDescription($event, true)"></span>\r\n            <span class="icon-share featured-player_buttons-layer_top-elements_rightside_buttons" ng-click="shareVideo($event)"></span>\r\n        </div>\r\n    </div>\r\n    <!-- center elements-->\r\n    <div class="featured-player_buttons-layer_center-elements stop-selection">\r\n\r\n        <div class="featured-player_buttons-layer_center-elements_group">\r\n            <div class="featured-player_buttons-layer_center-elements_group_title hidden-layer" ng-show="getNextVideo()">\r\n                Up next\r\n                <div class="featured-player_buttons-layer_center-elements_group_title_caption">{{nextVideo.title}}</div>\r\n            </div>\r\n            <div class="featured-player_buttons-layer_center-elements_group_controls">\r\n                <div class="featured-player_buttons-layer_center-elements_prev-next-wrapper">\r\n                    <span class="icon-back featured-player_buttons-layer_center-elements_prev hidden-layer" ng-click="playPreviousVideo($event)"  ng-show="getPreviousVideo()"></span>\r\n                </div>\r\n\r\n                <div class="featured-player_buttons-layer_center-elements_group_controls_wrapper">\r\n                    <div  class="featured-player_buttons-layer_center-elements_group_controls_progress hidden-layer"\r\n                          round-progress\r\n                          max="intermissionCountdownMax"\r\n                          current="intermissionCountdownValue"\r\n                          color="url(#progress-gradient)"\r\n                          bgcolor="rgba(255, 255, 255, 0.4)"\r\n                          stroke="20"\r\n                          semi="false"\r\n                          round="100"\r\n                          rounded="false"\r\n                          clockwise="true"\r\n                          responsive="false"\r\n                          duration="800"\r\n                          animation="easeInOutQuart"\r\n                          animation-delay="0">\r\n                        <svg>\r\n                            <linearGradient id="progress-gradient" x1="0" x2="0" y1="0" y2="1">\r\n                                <stop offset="5%"  stop-color="#24abbc"></stop>\r\n                                <stop offset="95%" stop-color="#3bfcec"></stop>\r\n                            </linearGradient>\r\n                        </svg>\r\n                    </div>\r\n                    <div class="featured-player_buttons-layer_center-elements_group_controls_wrapper-play-pause">\r\n                        <img src="images/iconVideoPlay.svg" ng-click="togglePlayPause($event)" class="featured-player_buttons-layer_center-elements_play-button">\r\n                        <img src="images/iconVideoPause.svg" ng-click="togglePlayPause($event)" class="featured-player_buttons-layer_center-elements_pause-button hidden-layer">\r\n                    </div>\r\n\r\n                </div>\r\n                <div class="featured-player_buttons-layer_center-elements_prev-next-wrapper">\r\n                    <span class="icon-forward featured-player_buttons-layer_center-elements_next hidden-layer" ng-click="playNextVideo($event)" ng-show="getNextVideo()"></span>\r\n                </div>\r\n\r\n            </div>\r\n            <div class="featured-player_buttons-layer_center-elements_group_bottom hidden-layer">\r\n                <span class="featured-player_buttons-layer_center-elements_pause-intermission" ng-click="pauseIntermissionToggle($event)">{{isIntermissionPaused ? \'Continue\' : \'Pause\'}}</span>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <!-- bottom elements-->\r\n    <div class="featured-player_buttons-layer_bottom-elements hidden-layer">\r\n        <div class="featured-player_buttons-layer_bottom-elements_titles featured-player_buttons-layer_bottom-elements_titles--hero-image">\r\n            <div class="featured-player_buttons-layer_bottom-elements_titles_current">\r\n                <div ng-class="iconTitle"></div>\r\n\r\n                <div class="featured-player_buttons-layer_bottom-elements_titles_current_title">\r\n                            <span class="featured-player_buttons-layer_bottom-elements_titles_current_title_created">\r\n                                {{createdDate}}\r\n                            </span>\r\n                            <span class="featured-player_buttons-layer_bottom-elements_titles_current_title">\r\n                                {{video.title}}\r\n                            </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="featured-player_buttons-layer_bottom-elements_controls">\r\n\r\n            <div class="featured-player_buttons-layer_bottom-elements_controls_time-position">{{timePassed}}</div>\r\n\r\n            <div class="featured-player_buttons-layer_bottom-elements_controls_slider">\r\n                <rzslider ng-click="$event.stopPropagation()"\r\n                          rz-slider-high="sliderModel.value"\r\n                          rz-slider-model="sliderModel.start"\r\n                          rz-slider-options="sliderModel.options"\r\n                >\r\n                </rzslider>\r\n            </div>\r\n\r\n            <div class="featured-player_buttons-layer_bottom-elements_controls_duration">{{duration}}</div>\r\n\r\n            <span class="icon-expand featured-player_buttons-layer_bottom-elements_controls_expand" ng-click="toggleFullScreen($event)"></span>\r\n            <span class="icon-collapse featured-player_buttons-layer_bottom-elements_controls_collapse hidden-layer" ng-click="toggleFullScreen($event)"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- hero image layer -->\r\n<img class="featured-player_hero-image-layer image-layer" ng-src="{{video.hero_images.hero_image_link}}">'),e.put("components/menu/menu.html",'<nav class="navbar">\r\n    <div class="navbar-main">\r\n        <div class="icon-menu navbar-main_button" ng-click="toggleMenu()" ></div>\r\n        <img class="navbar-main_logo" src="images/logo.svg">\r\n        <div class="icon-search navbar-main_button" ng-click="toggleMenuType(true)"></div>\r\n    </div>\r\n\r\n    <div class="navbar_search hidden-layer">\r\n        <span class="navbar_search_back icon-back navbar_search_buttons" ng-click="toggleMenuType(false)"></span>\r\n        <input class="navbar_search_input" ng-model="searchText" ng-keyup="searchInputUpdate()">\r\n        <span class="navbar_search_clear icon-close navbar_search_buttons" ng-click="clearSearchInput()"></span>\r\n    </div>\r\n</nav>\r\n\r\n<div class="menu">\r\n    <div class="menu_container">\r\n        <div class="menu_item">\r\n            <span class="menu_item_icon icon-home"></span>\r\n            <span class="menu_item_title">Home</span>\r\n            <span class="menu_item_counter"></span>\r\n            <span class="menu_item_next icon-forward"></span>\r\n        </div>\r\n        <div class="menu_item">\r\n            <span class="menu_item_icon icon-unseen"></span>\r\n            <span class="menu_item_title">Unseen</span>\r\n            <span class="menu_item_counter"></span>\r\n            <span class="menu_item_next icon-forward"></span>\r\n        </div>\r\n        <div class="menu_item">\r\n            <span class="menu_item_icon icon-skipped"></span>\r\n            <span class="menu_item_title">Skipped</span>\r\n            <span class="menu_item_counter"></span>\r\n            <span class="menu_item_next icon-forward"></span>\r\n        </div>\r\n        <div class="menu_item">\r\n            <span class="menu_item_icon icon-seen"></span>\r\n            <span class="menu_item_title">Seen</span>\r\n            <span class="menu_item_counter"></span>\r\n            <span class="menu_item_next icon-forward"></span>\r\n        </div>\r\n        <div class="menu_item">\r\n            <span class="menu_item_icon icon-favorites"></span>\r\n            <span class="menu_item_title">Favorites</span>\r\n            <span class="menu_item_counter"></span>\r\n            <span class="menu_item_next icon-forward"></span>\r\n        </div>\r\n        <div class="menu_item" ng-click="signInClick()">\r\n            <span class="menu_item_icon icon-profile"></span>\r\n            <span class="menu_item_title">Sign in</span>\r\n            <span class="menu_item_counter"></span>\r\n            <span class="menu_item_next icon-forward"></span>\r\n        </div>\r\n    </div>\r\n    <div class="menu_container_outer"  ng-click="toggleMenu(true)"></div>\r\n\r\n</div>\r\n\r\n<div class="search-results  hidden-layer">\r\n    <div ng-repeat="foundedVideo in searchResult" class="search-results_item" ng-click="searchItemClick(foundedVideo)">\r\n        <span class="search-results_item_category  icon-category{{categoryIconMap(foundedVideo.category_id)}}"></span>\r\n        <span class="search-results_item_title">{{foundedVideo.title}}</span>\r\n        <span class="search-results_item_play icon-play"></span>\r\n    </div>\r\n</div>'),
e.put("components/play-items/playItems.html",'<div class="play-items" id="category-videos-{{categoryId}}">\r\n    <div class="play-items_title">\r\n        <span class="icon-category{{iconName}} play-items_title_icon"></span>\r\n        <span class="play-items_title_name">{{title}}</span>\r\n    </div>\r\n\r\n    <div class="play-items_videos">\r\n        <div class="play-items_videos_wrapper">\r\n            <div class="play-items_videos_item"\r\n                 ng-repeat="video in videosList"\r\n                 style="background-image: url(\'{{video.hero_images.hero_image_link_thumb_banner}}\')"\r\n                 ng-click="moveToPlayPage(video.id)"\r\n                 ng-attr-id="play-video-item-{{video.id}}"\r\n            >\r\n                <div class="play-items_videos_item_overlay">\r\n                    <span class="play-items_videos_item_overlay_button icon-play"  ng-hide="video.isWatched"></span>\r\n                    <span class="play-items_videos_item_overlay_button icon-replay"  ng-show="video.isWatched"></span>\r\n                </div>\r\n                <div class="play-items_videos_item_title">\r\n                    <span class="play-items_videos_item_title_date">{{::video.humanizedDate}}</span>\r\n                    <span class="play-items_videos_item_title_caption">{{::video.title}}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>'),e.put("components/show-player/showPlayer.html",'\r\n\r\n<div class="show-player" video-id="{{video.id}}">\r\n\r\n\r\n    <!-- video layer -->\r\n    <div class="video-layer show-player_video-layer">\r\n        <video class="show-player_video-layer_video" video-src="sources" preload=\'none\'></video>\r\n    </div>\r\n\r\n    <!-- next hero image layer -->\r\n    <div class="col-xs-12 no-padding hero-image-layer show-player_hero-image-layer-next hidden-layer" style="background-image: url({{nextVideo.hero_images.hero_image_link}})">\r\n    </div>\r\n\r\n    <featured-carousel featured-list="featuredList" selected-video="featuredItem" on-replay="replayVideo()"></featured-carousel>\r\n</div>\r\n\r\n<!-- description layer-->\r\n<div class="col-xs-12 no-padding show-player_description-layer hidden-layer">\r\n    <div class="show-player_description-layer_container">\r\n        <div class="show-player_description-layer_container_close-container">\r\n            <div class="show-player_description-layer_container_close-container_button icon-close" ng-click="toggleDescription($event, false)"></div>\r\n        </div>\r\n\r\n        <div class="show-player_description-layer_container_titles">\r\n            <div class="show-player_description-layer_container_titles_category icon-category{{iconTitle}}"></div>\r\n\r\n            <div class="show-player_description-layer_container_titles_labels">\r\n                        <span class="show-player_description-layer_container_titles_labels_created">\r\n                            {{createdDate}}\r\n                        </span>\r\n                        <span class="show-player_description-layer_container_titles_labels_title">\r\n                            {{video.title}}\r\n                        </span>\r\n            </div>\r\n        </div>\r\n        <div class="show-player_description-layer_container_text">\r\n            {{video.description}}\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n<!-- buttons layer-->\r\n<div class="show-player_buttons-layer"\r\n     ng-mouseenter="imageHover()"\r\n     ng-mouseleave="imageBlur()"\r\n     ng-click="togglePlayPause()"\r\n     ng-dblclick="toggleFullScreen()"\r\n     ng-mousemove="showControlsOnMove()"\r\n>\r\n    <!-- top buttons-->\r\n    <div class="show-player_buttons-layer_top-elements">\r\n        <div>\r\n\r\n        </div>\r\n\r\n\r\n        <div class="show-player_buttons-layer_top-elements_rightside">\r\n            <span class="icon-favorites show-player_buttons-layer_top-elements_rightside_buttons featured-player_buttons-layer_top-elements_rightside_buttons_favorites"\r\n                    ng-click="toggleFavorites($event)"></span>\r\n            <span class="icon-info show-player_buttons-layer_top-elements_rightside_buttons" ng-click="toggleDescription($event, true)"></span>\r\n            <span class="icon-share show-player_buttons-layer_top-elements_rightside_buttons" ng-click="shareVideo($event)"></span>\r\n        </div>\r\n    </div>\r\n    <!-- center elements-->\r\n    <div class="show-player_buttons-layer_center-elements stop-selection">\r\n\r\n        <div class="show-player_buttons-layer_center-elements_group">\r\n            <div class="show-player_buttons-layer_center-elements_group_title hidden-layer" ng-show="getNextVideo()">\r\n                Up next\r\n                <div class="show-player_buttons-layer_center-elements_group_title_caption">{{nextVideo.title}}</div>\r\n            </div>\r\n            <div class="show-player_buttons-layer_center-elements_group_controls">\r\n                <div class="show-player_buttons-layer_center-elements_prev-next-wrapper">\r\n                    <span class="icon-back show-player_buttons-layer_center-elements_prev hidden-layer" ng-click="playPreviousVideo($event)"  ng-show="getPreviousVideo()"></span>\r\n                </div>\r\n\r\n                <div class="show-player_buttons-layer_center-elements_group_controls_wrapper">\r\n                    <div  class="show-player_buttons-layer_center-elements_group_controls_progress hidden-layer"\r\n                          round-progress\r\n                          max="intermissionCountdownMax"\r\n                          current="intermissionCountdownValue"\r\n                          color="url(#progress-gradient)"\r\n                          bgcolor="rgba(255, 255, 255, 0.4)"\r\n                          stroke="20"\r\n                          semi="false"\r\n                          round="100"\r\n                          rounded="false"\r\n                          clockwise="true"\r\n                          responsive="false"\r\n                          duration="800"\r\n                          animation="easeInOutQuart"\r\n                          animation-delay="0">\r\n                        <svg>\r\n                            <linearGradient id="progress-gradient" x1="0" x2="0" y1="0" y2="1">\r\n                                <stop offset="5%"  stop-color="#24abbc"></stop>\r\n                                <stop offset="95%" stop-color="#3bfcec"></stop>\r\n                            </linearGradient>\r\n                        </svg>\r\n                    </div>\r\n                    <div class="show-player_buttons-layer_center-elements_group_controls_wrapper-play-pause">\r\n                        <img src="images/iconVideoPlay.svg" ng-click="togglePlayPause($event)" class="show-player_buttons-layer_center-elements_play-button">\r\n                        <img src="images/iconVideoPause.svg" ng-click="togglePlayPause($event)" class="show-player_buttons-layer_center-elements_pause-button hidden-layer">\r\n                    </div>\r\n\r\n                </div>\r\n                <div class="show-player_buttons-layer_center-elements_prev-next-wrapper">\r\n                    <span class="icon-forward show-player_buttons-layer_center-elements_next hidden-layer" ng-click="playNextVideo($event)" ng-show="getNextVideo()"></span>\r\n                </div>\r\n\r\n            </div>\r\n            <div class="show-player_buttons-layer_center-elements_group_bottom hidden-layer">\r\n                <span class="show-player_buttons-layer_center-elements_pause-intermission" ng-click="pauseIntermissionToggle($event)">{{isIntermissionPaused ? \'Continue\' : \'Pause\'}}</span>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n    <!-- bottom elements-->\r\n    <div class="show-player_buttons-layer_bottom-elements hidden-layer">\r\n        <div class="show-player_buttons-layer_bottom-elements_titles show-player_buttons-layer_bottom-elements_titles--hero-image">\r\n            <div class="show-player_buttons-layer_bottom-elements_titles_current">\r\n                <div ng-class="iconTitle"></div>\r\n\r\n                <div class="show-player_buttons-layer_bottom-elements_titles_current_title">\r\n                            <span class="show-player_buttons-layer_bottom-elements_titles_current_title_created">\r\n                                {{createdDate}}\r\n                            </span>\r\n                            <span class="show-player_buttons-layer_bottom-elements_titles_current_title">\r\n                                {{video.title}}\r\n                            </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="show-player_buttons-layer_bottom-elements_controls">\r\n\r\n            <div class="show-player_buttons-layer_bottom-elements_controls_time-position">{{timePassed}}</div>\r\n\r\n            <div class="show-player_buttons-layer_bottom-elements_controls_slider">\r\n                <rzslider ng-click="$event.stopPropagation()"\r\n                          rz-slider-high="sliderModel.value"\r\n                          rz-slider-model="sliderModel.start"\r\n                          rz-slider-options="sliderModel.options"\r\n                >\r\n                </rzslider>\r\n            </div>\r\n\r\n            <div class="show-player_buttons-layer_bottom-elements_controls_duration">{{duration}}</div>\r\n\r\n            <span class="icon-expand show-player_buttons-layer_bottom-elements_controls_expand" ng-click="toggleFullScreen($event)"></span>\r\n            <span class="icon-collapse show-player_buttons-layer_bottom-elements_controls_collapse hidden-layer" ng-click="toggleFullScreen($event)"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- hero image layer -->\r\n<img class="show-player_hero-image-layer image-layer" ng-src="{{video.hero_images.hero_image_link}}">'),e.put("components/top-menu/top-menu.html",'<div class="top-menu">\r\n\r\n    <div class="top-menu_navigation">\r\n        <div class="top-menu_main">\r\n            <span class="icon-menu top-menu_icon"></span>\r\n            <img class="top-menu_logo" src="images/logo.svg" ng-click="moveToHome()">\r\n        </div>\r\n\r\n        <div class="top-menu_categories">\r\n            <div class="top-menu_categories_item" ng-repeat="category in categoryList" ng-click="categoryClick($event, category.id)">{{category.title}}</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="top-menu_advanced">\r\n        <div class="top-menu_search">\r\n            <div class="top-menu_search_string">\r\n                <button class="top-menu_search_button icon-search"></button>\r\n                <input class="top-menu_search_input" placeholder="Search" ng-model="searchText" ng-keyup="search()">\r\n            </div>\r\n\r\n            <div class="top-menu_search_results">\r\n                <div class="top-menu_search_results_item" ng-repeat="searchItem in searchResult" ng-click="playFoundVideo(searchItem.id)">\r\n                    <span class="icon-category{{::searchItem.iconName}} top-menu_search_results_item_icon"></span>\r\n                    <span>{{searchItem.title}}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button class="top-menu_login" ng-click="moveToLogin()"><span class="icon-profile top-menu_login_icon"></span>Sign Up/Log In</button>\r\n    </div>\r\n\r\n\r\n</div>'),e.put("temp/final/index.html",'<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <title>Cizo</title>\r\n    <link rel="stylesheet" href="all.min.css?2949052">\r\n</head>\r\n<body ng-controller="AppCtrl">\r\n\r\n<div ui-view></div>\r\n\r\n<script src="3d-party.min.js?2949052"></script>\r\n<script src="ng.min.js?2949052"></script>\r\n<script>\r\n    angular.bootstrap(document, [\'app\']);\r\n</script>\r\n\r\n</body>\r\n</html>'),e.put("views/home/home.html",'<div class="home">\r\n\r\n    <featured-player\r\n            id="featured-player"\r\n            video="featuredItem"\r\n            featured-list="featuredList"\r\n            categories-list="categoriesList"\r\n            featured-item="featuredItem"\r\n            host-name="{{hostName}}"\r\n            storage="storage"\r\n            videos="videosList"\r\n    ></featured-player>\r\n\r\n    <div class="home_video-items">\r\n        <category-items category-id="11" videos="videosList" categories="categoriesList"></category-items>\r\n        <category-items category-id="12" videos="videosList" categories="categoriesList"></category-items>\r\n        <category-items category-id="13" videos="videosList" categories="categoriesList"></category-items>\r\n        <category-items category-id="14" videos="videosList" categories="categoriesList"></category-items>\r\n    </div>\r\n\r\n</div>\r\n\r\n'),e.put("views/list/list.html",'<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <title>Title</title>\r\n</head>\r\n<body>\r\n\r\n</body>\r\n</html>'),e.put("views/login/login.html",'<form>\r\n    <nav class="navbar">\r\n        <div class="navbar-login">\r\n            <img class="navbar-login_logo" src="images/logo.svg">\r\n        </div>\r\n    </nav>\r\n\r\n    <div class="col-xs-12 col-md-6 col-md-offset-3 login-form">\r\n        <button class="login-form_facebook-login">\r\n            <span class="icon-facebook"></span>\r\n            Log in with Facebook\r\n        </button>\r\n\r\n        <div class="login-form_title">Or, log in with your email address.</div>\r\n\r\n        <input ng-model="login.email" class="login-form_input" placeholder="Email Address" type="email">\r\n        <input ng-model="login.password" class="login-form_input" placeholder="Password" type="password">\r\n\r\n        <button class="login-form_login" ng-click="processLogin()">Log In</button>\r\n\r\n        <div class="login-form_forgot-password">Forgot email address and/or password?</div>\r\n    </div>\r\n\r\n    <div class="want-account">\r\n        Want an account? <span class="want-account_login" ng-click="registerClick()">Sign Up</span>\r\n    </div>\r\n</form>'),e.put("views/play/play.html",'<div class="play">\r\n    <top-menu categories="categoriesList"\r\n              host-name="{{hostName}}"\r\n              videos-list="videosList"\r\n    ></top-menu>\r\n\r\n    <show-player class="play_player"\r\n                 video="videoItem"\r\n                 videos-list="videosList"\r\n                 featured-list="featuredList"\r\n                 host-name="{{hostName}}"></show-player>\r\n\r\n    <div class="play_video-items">\r\n        <play-items category-id="{{videoCategoryId}}" videos="videosList" categories="categoriesList"></play-items>\r\n    </div>\r\n\r\n</div>'),e.put("views/register/register.html",'<form>\r\n    <nav class="navbar">\r\n        <div class="navbar-register">\r\n            <img class="navbar-register_logo" src="images/logo.svg">\r\n        </div>\r\n    </nav>\r\n\r\n    <div class="col-xs-12 col-md-6 col-md-offset-3 register-form">\r\n        <button class="register-form_facebook-login" ng-click="facebookRegister()">\r\n            <span class="icon-facebook"></span>\r\n            Continue with Facebook\r\n        </button>\r\n\r\n        <div class="register-form_title">Or, sign up with your email address</div>\r\n\r\n        <input ng-model="register.email" class="register-form_input" placeholder="Email Address" type="email">\r\n        <input ng-model="register.password" class="register-form_input" placeholder="Password" type="password">\r\n        <div class="register-form_input_date">\r\n            <select name="month" ng-model="register.month" class="register-form_input--date-month"\r\n                    ng-options="month as month.name for month in months track by month.key"></select>\r\n            <input ng-model="register.day" class="register-form_input--date" placeholder="Day">\r\n            <input ng-model="register.year" class="register-form_input--date" placeholder="Year">\r\n        </div>\r\n\r\n        <div class="register-form_description">\r\n            By clicking on Sign Up, you agree to<br>\r\n            <span class="register-form_terms">Cizo\'s terms of use</span> and <span class="register-form_terms">privacy policy</span>\r\n        </div>\r\n\r\n        <button class="register-form_sign-up" ng-click="registerUser()">Sign up</button>\r\n\r\n    </div>\r\n\r\n    <div class="have-account">\r\n        Already have an account? <span class="have-account_login">Log in</span>\r\n    </div>\r\n</form>\r\n'),e.put("views/share/share.html",'<div class="share" style="background-image: url(\'{{video.hero_images.hero_image_link}}\')"> </div>\r\n\r\n<div class="share_close-button icon-close" ng-click="closeShare()"></div>\r\n\r\n<div class="share-wrapper">\r\n    <div class="share_group">\r\n        <div class="share_group_title">\r\n            <span class="icon-share"></span>\r\n            <span>Share this video</span>\r\n        </div>\r\n\r\n        <div class="share_group_video"\r\n             style="background-image: url(\'{{video.hero_images.hero_image_link}}\')"\r\n        >\r\n            <div class="share_group_video_title">\r\n                <span class="share_group_video_title_caption">{{::video.title}}</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="share_group_social">\r\n            <div class="share_group_social_item social-facebook" ng-click="shareVideoItem(\'facebook\')">\r\n                <span class="icon-facebook"></span>\r\n                <span>Facebook</span>\r\n            </div>\r\n            <div class="share_group_social_item social-twitter" ng-click="shareVideoItem(\'twitter\')">\r\n                <span class="icon-twitter icon-adjust-twitter"></span>\r\n                <span>Twitter</span>\r\n            </div>\r\n            <div class="share_group_social_item social-google" ng-click="shareVideoItem(\'google\')">\r\n                <span class="icon-google icon-adjust-google"></span>\r\n                <span>Google</span>\r\n            </div>\r\n            <div class="share_group_social_item social-reddit" ng-click="shareVideoItem(\'reddit\')">\r\n                <span class="icon-reddit icon-adjust-reddit"></span>\r\n                <span>Reddit</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="share_group_link-title">\r\n            <div class="share_group_link-title_decoration"></div>\r\n            <span class="share_group_link-title_caption">Link</span>\r\n            <div class="share_group_link-title_decoration"></div>\r\n        </div>\r\n\r\n        <span class="share_group_link">{{shareLink}}</span>\r\n\r\n\r\n    </div>\r\n</div>\r\n\r\n<div class="share_overlay"></div>')}]),angular.module("app.services").factory("userServ",userServ),userServ.$inject=["$http","$q","$log","moment"],angular.module("app.services").factory("videoServ",videoServ),videoServ.$inject=["$http","$q","$log"],angular.module("app.directives").directive("videoSrc",videoSrc),videoSrc.$inject=[],angular.module("app.wrappers",[]).factory("lodash",_lodash),_lodash.$inject=["$log"],angular.module("app.wrappers").factory("moment",_moment),angular.module("app.routerHelper").provider("routerHelper",routerHelperProvider),routerHelperProvider.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],angular.module("app.routes",[]).constant("routesList",[{state:"register",config:{url:"/register",templateUrl:"views/register/register.html",controller:"RegisterCtrl",controllerAs:"videos"}},{state:"login",config:{url:"/login",templateUrl:"views/login/login.html",controller:"LoginCtrl",controllerAs:"login"}},{state:"home",config:{url:"",templateUrl:"views/home/home.html",controller:"HomeCtrl",controllerAs:"home"}},{state:"main",config:{url:"/",templateUrl:"views/home/home.html",controller:"HomeCtrl",controllerAs:"home"}},{state:"play",config:{url:"/play/:videoId/:categoryId",templateUrl:"views/play/play.html",controller:"PlayCtrl",controllerAs:"play"}},{state:"list",config:{url:"/list",templateUrl:"views/list/list.html",controller:"ListCtrl",controllerAs:"list"}},{state:"share",config:{url:"/share/:videoId",templateUrl:"views/share/share.html",controller:"ShareCtrl",controllerAs:"share"}},{state:"shared_play",config:{url:"/videos/:videoId",templateUrl:"views/play/play.html",controller:"PlayCtrl",controllerAs:"play"}}]),angular.module("app.services").factory("storageServ",storageServ),storageServ.$inject=["$window"],angular.module("app.directives").directive("categoryItems",categoryItems),categoryItems.$inject=["$state","lodash","playerServ"],angular.module("app.directives").directive("featuredCarousel",featuredCarousel),featuredCarousel.$inject=["lodash"],angular.module("app.directives").directive("featuredPlayer",featuredPlayer),featuredPlayer.$inject=["$log","moment","lodash","$sce","$timeout","$anchorScroll","$q","$interval","playerServ","RecursionHelper","userServ"],angular.module("app.directives").directive("menu",menu),menu.$inject=["$http","$q","$log","$sce","$state"],angular.module("app.directives").directive("playItems",playItems),playItems.$inject=["$state","lodash","playerServ"],angular.module("app.directives").directive("showPlayer",showPlayer),showPlayer.$inject=["$log","moment","lodash","$sce","$timeout","$anchorScroll","$q","$interval","playerServ"],angular.module("app.directives").directive("topMenu",topMenu),topMenu.$inject=["$state","$anchorScroll","$http","$timeout","$q","$log","playerServ","lodash"],angular.module("app.controls").controller("HomeCtrl",HomeCtrl),HomeCtrl.$inject=["$scope","$rootScope","playerServ","userServ","lodash","storageServ"],angular.module("app.controls").controller("ListCtrl",ListCtrl),ListCtrl.$inject=["$scope","$state","userServ","storageServ"],angular.module("app.controls").controller("LoginCtrl",LoginCtrl),LoginCtrl.$inject=["$scope","$state","userServ","storageServ"],angular.module("app.controls").controller("PlayCtrl",PlayCtrl),PlayCtrl.$inject=["$scope","$rootScope","$stateParams","lodash","playerServ","userServ"],angular.module("app.controls").controller("RegisterCtrl",RegisterCtrl),RegisterCtrl.$inject=["$scope","$log","userServ","moment"],angular.module("app.controls").controller("ShareCtrl",ShareCtrl),ShareCtrl.$inject=["$scope","$rootScope","$stateParams","lodash","$state","playerServ"];
//# sourceMappingURL=ng.min.js.map
