"use strict";function AppCtrl(e,t,r,o){e.title="Cizo",e.videosList=[],applicationStart(t,r,o)}function applicationStart(e,t,r){e.configureStates(t),r.go("main")}function _lodash(){return _}function _moment(){return moment}function routerHelperProvider(e,t,r){function o(e){function o(e,o){e.forEach(function(e){t.state(e.state,e.config)}),o&&!a&&(a=!0,r.otherwise(o))}function n(){return e.get()}var a=!1;return{configureStates:o,getStates:n}}this.$get=o,o.$inject=["$state"]}function player(e,t){function r(){}function o(o,n,a){function l(){var t=angular.element(document.querySelector("video.screen"))[0],r=angular.element(document.querySelector("div.play-button span"))[0];t.paused?(t.play(),e.info("start playing"),r.classList.add("glyphicon-play"),r.classList.remove("glyphicon-pause"),o.$apply()):(t.pause(),e.info("set to pause"),r.classList.add("glyphicon-pause"),r.classList.remove("glyphicon-play"),o.$apply())}var i=angular.element(document.querySelector("video.screen"));i.on("click",r),i.on("timeupdate",function(){o.timePassed=t().startOf("year").add(i[0].currentTime,"s").format("mm:ss"),o.duration=t().startOf("year").add(i[0].duration,"s").format("mm:ss"),o.$apply()});var c=angular.element(document.querySelector("div.play-button span"));c.on("click",l)}return{restrict:"E",templateUrl:"components/player/player.html",link:o,transclude:!0,scope:{width:"@"}}}function sidebar(e){function t(t){e.info("linked")}return{restrict:"E",templateUrl:"components/sidebar/sidebar.html",link:t,transclude:!0,scope:{}}}function uploader(e,t,r){function o(e){var t=angular.element(document.querySelector(".drop-zone")),r=parseInt(e.loaded/e.total*100);t.text("Upload: "+r+"%")}function n(e){var t=angular.element(document.querySelector(".drop-zone"));4==e.target.readyState&&(200==e.target.status?t.text("Upload successfully finished"):(t.text("Error occurred with status "+e.target.status),t.addClass("error"),r(function(){t.text("Drag file or click to select"),t.removeClass("error")},3e3)))}function a(a){var l=angular.element(document.querySelector(".drop-zone"));t.each(a,function(t){var a=3e3;if(l[0].classList.remove("drop"),"video/mp4"!==t.type)return e.warn("Unsupported file format"),l.text("Unsupported file format"),l.addClass("error"),void r(function(){l.text("Drag file or click to select"),l.removeClass("error")},a);var i=new XMLHttpRequest,c="localhost:8080/v1/videos/2/stream_transcode_request";i.upload.addEventListener("progress",o,!1),i.onreadystatechange=n,i.open("POST",c),i.send(t)})}function l(){var e=angular.element(document.querySelector(".drop-zone")),t=angular.element(document.querySelector(".file-input"));e.on("click",function(){var e=angular.element(document.querySelector(".file-input"));e[0].click()}),e.on("dragover",function(t){return t.preventDefault(),e[0].classList.add("hover"),!1}),e.on("dragleave",function(t){return t.preventDefault(),e[0].classList.remove("hover"),!1}),e.on("drop",function(t){if(t.stopPropagation(),t.preventDefault(),e[0].classList.remove("hover"),e[0].classList.add("drop"),t&&t.dataTransfer&&t.dataTransfer.files){var r=t.dataTransfer.files;a(r)}return!1}),t.on("change",function(){var e=angular.element(document.querySelector(".file-input"))[0].files;a(e)})}return{restrict:"E",templateUrl:"components/uploader/uploader.html",link:l,transclude:!0,scope:{}}}function ContentCtrl(e,t,r){var o="views/content/videos.json";t({method:"GET",url:o}).then(function(t){e.videosList=t.data.data,r.info("data received")},function(e){r.error("receiving error happened: "+e)})}function MainCtrl(e){e.trending="Trending",e.categories="Categories",e.videos="Videos"}function UploadCtrl(e,t){}function VideoCtrl(e,t){}function WatchCtrl(e,t,r,o){var n;t.link&&(n=r.trustAs(r.RESOURCE_URL,t.link.replace(/%2F/g,"/"))),e.page="Watch",e.playerSettings={width:o.innerWidth,link:n}}angular.module("app",["app.controls","app.directives","app.routerHelper","app.wrappers","app.routes","ngSanitize"]).controller("AppCtrl",AppCtrl),AppCtrl.$inject=["$scope","routerHelper","routesList","$state"],angular.module("app.helpers",[]).factory("RecursionHelper",["$compile",function(e){return{compile:function(t,r){angular.isFunction(r)&&(r={post:r});var o,n=t.contents().remove();return{pre:r&&r.pre?r.pre:null,post:function(t,a){o||(o=e(n)),o(t,function(e){a.append(e)}),r&&r.post&&r.post.apply(null,arguments)}}}}}]),angular.module("app.wrappers").factory("lodash",_lodash),angular.module("app.wrappers",[]).factory("moment",_moment),angular.module("app.routerHelper",["ui.router"]).provider("routerHelper",routerHelperProvider),routerHelperProvider.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],angular.module("app.routes",[]).constant("routesList",[{state:"main",config:{url:"/",templateUrl:"views/main/main.html",controller:"MainCtrl",controllerAs:"main"}},{state:"content",config:{url:"/content",templateUrl:"views/content/content.html",controller:"ContentCtrl",controllerAs:"content"}},{state:"video",config:{url:"/video/:id",templateUrl:"views/video/video.html",controller:"VideoCtrl",controllerAs:"video"}},{state:"upload",config:{url:"/upload/:id",templateUrl:"views/upload/upload.html",controller:"UploadCtrl",controllerAs:"upload"}}]),angular.module("app.directives",[]).directive("player",player),player.$inject=["$log","moment"],angular.module("app.directives").directive("sidebar",sidebar),sidebar.$inject=["$log"],angular.module("app.directives").directive("uploader",uploader),uploader.$inject=["$log","lodash","$timeout"],angular.module("app.controls").controller("ContentCtrl",ContentCtrl),ContentCtrl.$inject=["$scope","$http","$log"],angular.module("app.controls",["ngSanitize"]).controller("MainCtrl",MainCtrl),MainCtrl.$inject=["$scope"],angular.module("app.controls").controller("UploadCtrl",UploadCtrl),UploadCtrl.$inject=["$scope","$log"],angular.module("app.controls").controller("VideoCtrl",VideoCtrl),VideoCtrl.$inject=["$scope","$log"],angular.module("app.controls").controller("WatchCtrl",WatchCtrl),WatchCtrl.$inject=["$scope","$stateParams","$sce","$window"];
//# sourceMappingURL=all-ng.min.js.map
