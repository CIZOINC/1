"use strict";function AppCtrl(e,t,r,n){e.title="Cizo",e.hostName="http://staging.cizo.com",e.categoriesList=[],applicationStart(t,r,n)}function applicationStart(e,t,r){e.configureStates(t),r.go("main")}function categoriesServ(e,t,r){function n(n){return t(function(t,i){function o(e){r.info("categories list obtained"),t(e)}function a(e){r.info("categories list obtaining error with status "+e.status),i(e)}e({method:"GET",url:n.hostName+"/categories"}).then(o,a)})}function i(n,i){return t(function(t,o){function a(e){r.info("category data created"),t(e)}function s(e){r.info("category data creation error with status "+e.status),o(e)}e({method:"POST",url:n.hostName+"/categories",data:i}).then(a,s)})}function o(n,i){return t(function(t,o){function a(e){r.info("category data delivered"),t(e)}function s(e){r.info("category data getting error with status "+e.status),o(e)}e({method:"GET",url:n.hostName+"/categories/"+i}).then(a,s)})}function a(n,i,o){return t(function(t,a){function s(e){r.info("category data updated"),t(e)}function d(e){r.info("category data updating error with status "+e.status),a(e)}e({method:"PUT",url:n.hostName+"/categories/"+i,data:o}).then(s,d)})}function s(n,i){return t(function(t,o){function a(e){r.info("category data deleted"),t(e)}function s(e){r.info("category data deleting error with status "+e.status),o(e)}e({method:"DELETE",url:n.hostName+"/categories/"+i}).then(a,s)})}return{getCategoriesList:n,makeCategory:i,getCategory:o,setCategory:a,deleteCategory:s}}function _lodash(e){return _}function _moment(){return moment}function routerHelperProvider(e,t,r){function n(e){function n(e,n){e.forEach(function(e){t.state(e.state,e.config)}),n&&!o&&(o=!0,r.otherwise(n))}function i(){return e.get()}var o=!1;return{configureStates:n,getStates:i}}this.$get=n,n.$inject=["$state"]}function player(e,t,r,n){function i(i,o,a){function s(e){var t={11:"Movie",12:"TV",13:"Games",14:"Lifestyle"};return t[String(e)]}function d(){var e=angular.element(document.querySelector('div[video-id="'+i.video.id+'"] div.text-overlay-layer'))[0],t=angular.element(document.querySelector('div[video-id="'+i.video.id+'"] video'))[0];t.paused&&e.classList.remove("hidden-layer")}function l(){var e=angular.element(document.querySelector('div[video-id="'+i.video.id+'"] div.text-overlay-layer'))[0];e.classList.add("hidden-layer")}function c(){var t=angular.element(document.querySelector('div[video-id="'+i.video.id+'"] video'))[0],r=angular.element(document.querySelector('div[video-id="'+i.video.id+'"] div.video-layer'))[0],n=angular.element(document.querySelector('div[video-id="'+i.video.id+'"] div.hero-image-layer'))[0],o=angular.element(document.querySelector('div[video-id="'+i.video.id+'"] div.play-button-layer'))[0];t.paused?(t.play(),e.info("start playing"),r.classList.remove("hidden-layer"),n.classList.add("hidden-layer"),o.classList.add("hidden-layer"),i.descriptionVisible=!0,i.$apply(),l()):(t.pause(),e.info("set to pause"),r.classList.add("hidden-layer"),n.classList.remove("hidden-layer"),o.classList.remove("hidden-layer"),i.descriptionVisible=!1,i.$apply(),d())}i=angular.extend(i,{togglePlayPause:c,descriptionVisible:!1,iconTitle:s(i.video.category_id),imageHover:d,imageBlur:l});var u=o[0].querySelector(".row");angular.element(u).bind("mouseenter",d),angular.element(u).bind("mouseleave",l),angular.element(u).bind("click",c);var v=o[0].querySelector("div.video-layer video");if(angular.element(v).bind("timeupdate",function(){var e=o[0].querySelector("div.video-layer video"),r=angular.element(e)[0];i.timePassed=t().startOf("year").add(r.currentTime,"s").format("mm:ss"),i.duration=t().startOf("year").add(r.duration,"s").format("mm:ss"),i.$apply()}),i.video.streams){var p=r.find(i.video.streams,function(e){return"mp4"===e.stream_type});i.videoLink=n.trustAs(n.RESOURCE_URL,p.link)}}return{restrict:"E",templateUrl:"components/player/player.html",link:i,transclude:!0,scope:{video:"=video"}}}function MainCtrl(e,t,r,n,i){function o(){return n(function(t){r.getCategoriesList(e).then(function(r){e.categoriesList=r.data.data,t()})})}function a(){return n(function(r){t.getVideosList(e).then(function(t){e.videosList=t.data.data,r()})})}function s(){i.each(e.videosList,function(t){var r=i.find(e.categoriesList,function(e){return e.id===t.category_id});t.categoryName=r.title})}e.videosList=[],o().then(a).then(s)}function videoServ(e,t,r){function n(n){return t(function(t,i){function o(e){r.info("video list obtained"),t(e)}function a(e){r.info("video list obtaining error with status "+e.status),i(e)}e({method:"GET",url:n.hostName+"/videos"}).then(o,a)})}function i(n,i){return t(function(t,o){function a(e){r.info("video data created"),t(e)}function s(e){r.info("video data creation error with status "+e.status),o(e)}e({method:"POST",url:n.hostName+"/videos",data:i}).then(a,s)})}function o(n,i){return t(function(t,o){function a(e){r.info("video data delivered"),t(e)}function s(e){r.info("video data getting error with status "+e.status),o(e)}e({method:"GET",url:n.hostName+"/videos/"+i}).then(a,s)})}function a(n,i,o){return t(function(t,a){function s(e){r.info("video data updated"),t(e)}function d(e){r.info("video data updating error with status "+e.status),a(e)}e({method:"PUT",url:n.hostName+"/videos/"+i,data:o}).then(s,d)})}function s(n,i){return t(function(t,o){function a(e){r.info("video data deleted"),t(e)}function s(e){r.info("video data deleting error with status "+e.status),o(e)}e({method:"DELETE",url:n.hostName+"/videos/"+i}).then(a,s)})}function d(n,i,o){var a=new FormData,s=a.append("heroImage",o);return t(function(t,o){function a(e){r.info("hero image uploaded"),t(e)}function d(e){r.info("hero image uploading error with status "+e.status),o(e)}e({method:"POST",url:n.hostName+"/videos/"+i+"/heroimage",data:s}).then(a,d)})}function l(n,i){return t(function(t,o){function a(e){r.info("streams called"),r.info(JSON.stringify(e)),t(e)}function s(e){r.info("streams call receiving error with status "+e.status),o(e)}e({method:"POST",url:n.hostName+"/videos/"+i+"/streams"}).then(a,s)})}return{getVideosList:n,makeVideo:i,getVideo:o,setVideo:a,deleteVideo:s,uploadHeroImage:d,sendStreams:l}}function VideosCtrl(e,t,r){r.getVideosList(e).then(function(r){e.videosList=r.data.data,t.info("data received")},function(e){t.error("receiving error happened: "+e)})}function WatchCtrl(e,t,r,n){var i;t.link&&(i=r.trustAs(r.RESOURCE_URL,t.link.replace(/%2F/g,"/"))),e.page="Watch",e.playerSettings={width:n.innerWidth,link:i}}angular.module("app.controls",["ngSanitize"]),angular.module("app.wrappers",[]),angular.module("app.services",[]),angular.module("app.directives",["app.services"]),angular.module("templates",[]),angular.module("app",["app.services","app.controls","app.directives","app.routerHelper","app.wrappers","app.routes","ngSanitize","templates"]).controller("AppCtrl",AppCtrl),AppCtrl.$inject=["$scope","routerHelper","routesList","$state"],angular.module("app.services").factory("categoriesServ",categoriesServ),categoriesServ.$inject=["$http","$q","$log"],angular.module("app.helpers",[]).factory("RecursionHelper",["$compile",function(e){return{compile:function(t,r){angular.isFunction(r)&&(r={post:r});var n,i=t.contents().remove();return{pre:r&&r.pre?r.pre:null,post:function(t,o){n||(n=e(i)),n(t,function(e){o.append(e)}),r&&r.post&&r.post.apply(null,arguments)}}}}}]),angular.module("templates").run(["$templateCache",function(e){e.put("index_template.html",'<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <title>Cizo</title>\r\n    <link rel="stylesheet" href="all.min.css">\r\n</head>\r\n<body ng-controller="AppCtrl">\r\n\r\n{{title}}\r\n\r\n<div ui-view></div>\r\n\r\n<script src="3d-party.min.js"></script>\r\n<script src="ng.min.js"></script>\r\n<script>\r\n    angular.bootstrap(document, [\'app\']);\r\n</script>\r\n\r\n\r\n\r\n</body>\r\n</html>'),e.put("components/player/player.html",'<div class="container-fluid" video-id="{{::video.id}}">\r\n    <div class="row">\r\n        <div class="col-xs-12 no-padding">\r\n            <!-- video layer -->\r\n            <div class="col-xs-12 no-padding video-layer hidden-layer">\r\n                <video class="col-xs-12 no-padding"  preload=\'none\'>\r\n                    <source src="">\r\n                    <source src="{{::videoLink}}" type="video/mp4">\r\n                </video>\r\n                <div class="info-panel">\r\n                    <span>{{timePassed}} / {{duration}}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- hero image layer -->\r\n            <div class="col-xs-12 no-padding hero-image-layer">\r\n                <img class="col-xs-12"  ng-src="{{::video.hero_image_link}}">\r\n            </div>\r\n\r\n            <!-- play button layer-->\r\n            <div class="play-button-layer">\r\n                <div class="play-button-centered" ng-click="togglePlayPause()">\r\n                    <img src="images/iconVidPlay.svg">\r\n                </div>\r\n            </div>\r\n            <!-- text overlay -->\r\n            <div class="text-overlay-layer hidden-layer">\r\n                <div class="text-overlay-region">\r\n                    <img ng-src="images/iconCategory{{::iconTitle}}.svg">\r\n                    <h3 class="overlayText">{{::video.title}}</h3>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" ng-show="descriptionVisible">\r\n        <div class="description" style="color: white">\r\n            <h4>{{::video.title}}</h4>\r\n            {{::video.description}}\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>'),e.put("views/main/main.html",'<nav class="navbar">\r\n    <div class="container-fluid">\r\n        <div class="row">\r\n            <span class="glyphicon glyphicon-menu-hamburger col-xs-1">Menu</span>\r\n            <div class="col-xs-10 text-center">Cizo</div>\r\n            <span class="glyphicon glyphicon-search col-xs-1">Search</span>\r\n        </div>\r\n\r\n    </div>\r\n</nav>\r\n\r\n<div class="container-fluid">\r\n    <div class="row" ng-repeat="videoItem in videosList">\r\n        <player class="col-xs-12 col-md-8 col-md-offset-2" video="videoItem"></player>\r\n    </div>\r\n</div>\r\n\r\n<!--<div>\r\n    <div class="btn-group-vertical">\r\n        <a class="btn btn-default" ui-sref="videos">{{videos}}</a>\r\n        <a class="btn btn-default">{{categories}}</a>\r\n        <a class="btn btn-default">{{trending}}</a>\r\n    </div>\r\n</div>-->'),e.put("views/videos/videos.html",'<div>\r\n    <h2>Videos</h2>\r\n\r\n    <div class="list-group">\r\n        <div class="list-group-item" ng-repeat="movie in videosList">\r\n            <div class="list-group-item-heading"><b>{{movie.title}}</b></div>\r\n            <div class="list-group-item-text">{{movie.description}}</div>\r\n            <a ui-sref="watch({link: movie.streams[0].link })">Watch</a>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("views/watch/watch.html",'<!--<video autoplay preload="auto" width="{{playerSettings.width}}">\r\n    <source src="{{playerSettings.link}}">\r\n</video>-->\r\n\r\n<player width="{{playerSettings.width}}">\r\n    <source src="{{playerSettings.link}}">\r\n</player>')}]),angular.module("app.wrappers",[]).factory("lodash",_lodash),_lodash.$inject=["$log"],angular.module("app.wrappers").factory("moment",_moment),angular.module("app.routerHelper",["ui.router"]).provider("routerHelper",routerHelperProvider),routerHelperProvider.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],angular.module("app.routes",[]).constant("routesList",[{state:"main",config:{url:"/",templateUrl:"views/main/main.html",controller:"MainCtrl",controllerAs:"main"}},{state:"videos",config:{url:"/videos",templateUrl:"views/videos/videos.html",controller:"VideosCtrl",controllerAs:"videos"}},{state:"watch",config:{url:"/watch/:link",templateUrl:"views/watch/watch.html",controller:"WatchCtrl",controllerAs:"watch"}}]),angular.module("app.directives",[]).directive("player",player),player.$inject=["$log","moment","lodash","$sce"],angular.module("app.controls").controller("MainCtrl",MainCtrl),MainCtrl.$inject=["$scope","videoServ","categoriesServ","$q","lodash"],angular.module("app.services").factory("videoServ",videoServ),videoServ.$inject=["$http","$q","$log"],angular.module("app.controls").controller("VideosCtrl",VideosCtrl),VideosCtrl.$inject=["$scope","$log","videoServ"],angular.module("app.controls").controller("WatchCtrl",WatchCtrl),WatchCtrl.$inject=["$scope","$stateParams","$sce","$window"];
//# sourceMappingURL=ng.min.js.map
